{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/components.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/components/prmAlmaOtherMembersAfter/regViewOtherMembers.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/components/prmSearchResultAvailabilityLineAfter/regViewAvailabilityLineConfig.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/main.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/explore.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/explore/components.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/explore/helper.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/facets.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/records.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/user.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/primo/view.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/primo-explore-dom/js/vendor/css-selector-generator.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/templates.js","primo-explore/custom/32KUL_KUL-REGIONAL/js/utils.js"],"names":[],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*\r\n  Declare your components here.\r\n\r\n  Rewrite this when imports can be done dynamically\r\n  http://2ality.com/2017/01/import-operator.html\r\n\r\n  KULeuven/LIBIS (c) 2017\r\n  Mehmet Celik\r\n*/\r\nimport './utils';\r\n/* import your component configuration*/\r\nimport {regViewOtherMembersConfig} from './components/prmAlmaOtherMembersAfter/regViewOtherMembers'\r\nimport {regViewAvailabilityLineConfig} from './components/prmSearchResultAvailabilityLineAfter/regViewAvailabilityLineConfig'\r\n\r\n\r\nexport default class AfterComponents {\r\n\r\n  static get all() {\r\n    /*\r\n      name = the sub element in the after element\r\n      config = the imported configuration object\r\n      enabled = true/false should the component be created\r\n      appendTo = The component should be created in this after component.\r\n\r\n      ex. {name: 'home-icon', config: homeIconConfig, enabled: true, appendTo: 'prm-logo-after'}\r\n      results in:\r\n        <prm-logo-after parentCtrl='$ctrl'>\r\n          <home-icon parentCtrl='$ctrl'></home-icon>\r\n        </prm-logo-after>\r\n    */\r\n    return [\r\n      /*\r\n      {name: 'libis-experiment', config: experimentConfig, enabled: false, appendTo: 'prm-messages-and-blocks-overview-after', enableInView: '.*'},\r\n      {name: 'libis-remove-user-area', config: removeUserAreaConfig, enabled: false, appendTo: 'prm-user-area-expandable-after', enableInView: '.*'},      \r\n      */\r\n      {name: 'libis-only-members', config: regViewOtherMembersConfig, enabled: true, appendTo: 'prm-alma-other-members-after', enableInView: '.*'},\r\n      {name: 'libis-availability-line', config: regViewAvailabilityLineConfig, enabled: true, appendTo: 'prm-search-result-availability-line-after', enableInView: '.*'},\r\n\r\n    ].filter( (component) => ( component.enabled && new RegExp(component.enableInView).test(window.appConfig.vid) ) );\r\n  }\r\n}\r\n","class regViewOtherMembersController {\r\n  constructor($scope, $element, $compile, $http, $rootScope) {\r\n    let self = this;\r\n    self.$scope = $scope;\r\n    self.$rootScope = $rootScope;\r\n    self.$element = $element;\r\n/*\r\n    console.log(  $rootScope )\r\n    console.log( self )\r\n    console.log(  self.parentCtrl.parentCtrl )\r\n*/\r\n    let itemDelivery = self.parentCtrl.parentCtrl.$scope.$parent.$parent.$parent.$ctrl.item.delivery;\r\n\r\n/*\r\nAlleen in eigen instelling\r\nhttp://localhost:8003/discovery/fulldisplay?docid=alma9925641190101488&context=L&vid=32KUL_KUL:LIBISNET2_UNION&lang=en&search_scope=DN_and_CI_UCV&adaptor=Local%20Search%20Engine&isFrbr=true&tab=DiscoveryNetwork_UCV&query=any,contains,wood&sortby=date_d&facet=frbrgroupid,include,9009075752282052547&offset=0\r\nhttp://localhost:8003/discovery/fulldisplay?docid=alma9992429289701488&context=L&vid=32KUL_KUL:LIBISNET2_UNION&lang=en&search_scope=DN_and_CI_UCV&adaptor=Local%20Search%20Engine&tab=DiscoveryNetwork_UCV&query=any,contains,wood&offset=0\r\n====> Dan is er ook geen prm-alma-other-members-after element !!!\r\n====> Deze controler zal dan niet worden uitgevoerd.\r\n\r\n=> FRBR \r\nhttps://libis-network.primo.exlibrisgroup.com/primaws/rest/priv/nz/pnx/P/9930070000101471?record-institution=32KUL_KUL&lang=en\r\nhttp://localhost:8003/primaws/rest/priv/nz/pnx/P/9930070000101488?record-institution=32KUL_KUL&lang=en\r\n\r\n\r\n\r\n\r\nNiet in eigen instelling\r\nhttp://localhost:8003/discovery/search?query=any,contains,9992170794501502&tab=DiscoveryNetwork_UCV&search_scope=DN_and_CI_UCV&vid=32KUL_KUL:LIBISNET2_UNION\r\n\r\n*/\r\n\r\n    if ( itemDelivery.serviceMode.includes(\"ovp\") ){\r\n      self.removePrmOpac();\r\n      self.addInstToAlmaInstitutionsList();\r\n    }\r\n    // console.log ( self.parentCtrl.parentCtrl.almaInstitutionsList )\r\n    self.parentCtrl.parentCtrl.almaInstitutionsList.sort((a, b) => (a.instName > b.instName) ? 1 : -1);\r\n  }\r\n\r\n  addInstToAlmaInstitutionsList() {\r\n    this.parentCtrl.parentCtrl.almaInstitutionsList.push(\r\n      {\r\n        \"getitLink\": [\r\n            {\r\n                \"displayText\": null,\r\n                \"linkRecordId\": this.parentCtrl.parentCtrl.almaInstitutionsList[0].getitLink[0].linkRecordId\r\n            }\r\n        ],\r\n        \r\n        \"instCode\": window.appConfig[\"primo-view\"].institution[\"institution-code\"],\r\n        \"instName\":  window.appConfig[\"primo-view\"].institution[\"institution-name\"],\r\n        \"instId\": window.appConfig[\"primo-view\"].institution.id,\r\n        \"availabilityStatus\": \"available_in_institution\",\r\n      }\r\n    );\r\n  }\r\n\r\n  removePrmOpac(){\r\n    let unbindWatcher = this.$scope.$watch(() =>\r\n      this.$element.parent().parent().parent().find('prm-opac'),\r\n      (newVal, oldVal) => {\r\n        //console.log (this);\r\n        if (newVal) {\r\n          newVal.find('md-tabs').remove();\r\n          unbindWatcher();\r\n        }\r\n      }\r\n    );\r\n   \r\n/*\r\n    Promise.resolve( this.$scope.$parent.$parent.$parent.$parent.$parent.$ctrl.fullViewService.getServices( this.parentCtrl.item, this.parentCtrl.originator) ).then(\r\n      function(services) {\r\n        console.log (services)\r\n        // Add to services if not alread in the list\r\n        //if ( services.findIndex(service => service.scrollId === \"altmetrics\") < 0 ){\r\n          services.splice(services.length -2, 0, sectionData);\r\n        //}\r\n    })\r\n*/\r\n/*\r\n\r\n    var prmOpacElement = document.querySelectorAll('#getit_link1_0 > div > prm-full-view-service-container > div.section-body > div > prm-opac')\r\n    var prmOpacMdTabsElement = document.querySelectorAll('#getit_link1_0 > div > prm-full-view-service-container > div.section-body > div > prm-opac > md-tabs')\r\n    console.log (prmOpacElement)\r\n    console.log (prmOpacMdTabsElement)\r\n    if ( prmOpacElement ) {\r\n      console.log (\"remover prmOpacElement\")\r\n      prmOpacElement[0].style.backgroundColor = \"red\";\r\n    }\r\n*/\r\n\r\n  }\r\n}\r\n\r\nregViewOtherMembersController.$inject = ['$scope', '$element', '$compile', '$http', '$rootScope'];\r\n\r\nexport let regViewOtherMembersConfig = {\r\n  bindings: {parentCtrl: '<'},\r\n  controller: regViewOtherMembersController,\r\n  template: ''\r\n}\r\n","  \r\n\r\n\r\n  class regViewAvailabilityLineController {\r\n    constructor($scope,$element,$translate) {\r\n      let self = this;\r\n\r\n      self.almaInstitutionsFilterInstCodeList = [\"32KUL_HUB\",\"32KUL_KHM\",\"32KUL_KHK\",\"32KUL_KHL\",\"32KUL_KATHO\",\"32KUL_LUCAWENK\"]\r\n      \r\n      self.$scope = $scope;\r\n      self.$element = $element;\r\n      self.$translate = $translate;\r\n      self.$ctrl =self.parentCtrl.parentCtrl ;\r\n      self.viewInst = window.appConfig[\"primo-view\"].institution.description;\r\n\r\n      /*\r\n      console.log( self )\r\n      console.log ( self.$ctrl.result.delivery.almaInstitutionsList )\r\n      console.log ( self.$ctrl)\r\n      console.log ( \"displayedAvailability:\"+ self.$ctrl.displayedAvailability );\r\n      */\r\n      self.$ctrl.displayedAvailability.forEach(availability => {\r\n        /*\r\n        console.log ( \"ifShowAvailability(availability):\"+ self.$ctrl.ifShowAvailability(availability) );\r\n        console.log ( \"!$ctrl.isCollectionDiscoveryCollection:\"+ self.$ctrl.isCollectionDiscoveryCollection );\r\n        console.log ( \"$ctrl.showTimer:\"+ self.$ctrl.showTimer);\r\n        console.log ( \"$ctrl.handleDueDate(availability):\"+ self.$ctrl.handleDueDate(availability) );\r\n        console.log ( \"$ctrl.isPhysical():\"+ self.$ctrl.isPhysical());\r\n        console.log ( \"$translate.instant('delivery.code.available_in_library') :\"+ $translate.instant('delivery.code.'+ self.$ctrl.handleDueDate(availability) )  );\r\n        console.log (  $translate.instant('delivery.code.'+ self.$ctrl.handleDueDate(availability) )  );\r\n        */\r\n        // ng-if=\"::($ctrl.showDisplayOtherLocations() || $ctrl.showDisplayLocation()  || $ctrl.showOtherLibraries(availability)) && $ctrl.isPhysical($index)\"\r\n\r\n        var availabilityInstitutions = self.$ctrl.result.delivery.almaInstitutionsList.filter(inst => {\r\n            return (inst.availabilityStatus === \"available_in_institution\" &&  self.almaInstitutionsFilterInstCodeList.includes(inst.instCode))\r\n        })\r\n        //console.log ( availabilityInstitutions.map( inst => inst.instName ).join() );\r\n\r\n        var availabilityInstitutionsNames = availabilityInstitutions.map( inst => inst.instName )\r\n\r\n        if ( availabilityInstitutionsNames.length > 0){\r\n            if (self.$ctrl.result.delivery.availability[0]  === \"available_in_library\"){\r\n                // replace instname from availabilityText with list of instnames\r\n                availabilityInstitutionsNames.unshift( window.appConfig[\"primo-view\"].institution.description );\r\n                self.$ctrl.availabilityRegView = \r\n                    $translate.instant('delivery.code.'+ self.$ctrl.handleDueDate(availability) ).replace(\r\n                        window.appConfig[\"primo-view\"].institution.description , \r\n                        availabilityInstitutionsNames.slice(0, -1).join(', ') +' and '+ availabilityInstitutionsNames.slice(-1)\r\n                    );\r\n            }\r\n            // if (self.$ctrl.result.delivery.bestlocation === null) {\r\n            if (self.$ctrl.result.delivery.availability[0] === \"no_inventory\"){\r\n                //self.$ctrl.displayedAvailability = [\"available_in_library\"];\r\n                self.$ctrl.result.delivery.availability = [\"available_in_library\"];\r\n                if  (availabilityInstitutionsNames.length === 1) {\r\n                    self.$ctrl.availabilityRegView = \r\n                    $translate.instant('delivery.code.available_in_library').replace(\r\n                        window.appConfig[\"primo-view\"].institution.description , \r\n                        availabilityInstitutionsNames[0]\r\n                    );\r\n                }else{\r\n                    self.$ctrl.availabilityRegView = \r\n                    $translate.instant('delivery.code.available_in_library').replace(\r\n                        window.appConfig[\"primo-view\"].institution.description , \r\n                        availabilityInstitutionsNames.slice(0, -1).join(', ') +' and '+ availabilityInstitutionsNames.slice(-1)\r\n                    );\r\n                }\r\n            }\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  regViewAvailabilityLineController.$inject = ['$scope','$element','$translate'];\r\n  \r\n  export let regViewAvailabilityLineConfig = {\r\n    bindings: {parentCtrl: '<'},\r\n    controller: regViewAvailabilityLineController,\r\n    template: ''\r\n  }\r\n  ","/*\r\n  Central Package Loader\r\n\r\n  Do NOT edit this file.\r\n  All components are declared in \"components.js\"\r\n\r\n  KULeuven/LIBIS (c) 2017\r\n  Mehmet Celik\r\n*/\r\nimport Primo from './primo-explore-dom/js/primo'\r\nimport Helper from './primo-explore-dom/js/primo/explore/helper'\r\nimport Components from './components'\r\nimport Templates from './templates'\r\n\r\n//make Primo public\r\nwindow.Primo = Primo;\r\n//load PrimoExplorer UI if angular.reloadWithDebugInfo() is ran\r\nwindow.setTimeout(function () {\r\n  if (Primo.isDebugEnabled()) {\r\n    let uiURL = 'https://cdn.rawgit.com/mehmetc/primo-explore-dom-ui/fc0868df/js/custom.js';\r\n    //let uiURL = 'http://127.0.0.1:8000/js/custom.js';\r\n\r\n    Helper.loadScript(uiURL).then(() => {\r\n      console.log('Injecting UI');\r\n      Primo.explore.ui.toggle();\r\n    });\r\n  }\r\n}, 2000);\r\n\r\nlet servicesHost = 'https://services.libis.be/';\r\n\r\n// let app = angular.module('viewCustom', ['ngMaterial', 'vcRecaptcha','googleAnalytics'])\r\nlet app = angular.module('viewCustom', ['ngMaterial', 'vcRecaptcha'])\r\n/*\r\n  .constant('feedbackServiceURL', servicesHost + 'feedback')\r\n  .constant('reportAProblemURL', servicesHost + 'report_a_problem')\r\n  .constant('requestACopyURL', servicesHost + 'request_a_copy')\r\n  .constant('requestACopyOfEsDocURL', servicesHost + 'illjwtform')\r\n  .config(($sceDelegateProvider) => {\r\n    $sceDelegateProvider.resourceUrlWhitelist([\r\n      '**'\r\n    ]);\r\n  })\r\n*/\r\n/*\r\napp.factory('regViewSearchHttpCallInterceptor', regViewSearchHttpCallInterceptor)  \r\n//intercept api calls for database search and change to KUL (only regional views)\r\nvar reg_views = [\"32KUL_HUB:LIBISNET2_UNION\"];\r\nif (reg_views.includes(window.appConfig.vid)) {\r\n  app.config(['$httpProvider', ($httpProvider) => { $httpProvider.interceptors.push('regViewSearchHttpCallInterceptor'); }]);\r\n}\r\n*/\r\n\r\n//Contains the after component selectors that will be injected\r\nlet afterComponents = {};\r\n\r\n//Create all components and determine in which after component these need to be\r\n//injected\r\nconsole.log('Loading viewCustom components');\r\nComponents.all.forEach((component) => {\r\n  console.log(component.name)\r\n  if (component.enabled) {\r\n    if (component.appendTo) {\r\n      let elements = afterComponents[component.appendTo] || [];\r\n      //elements.push(component.name);\r\n      elements.push({\r\n        'name': component.name,\r\n        'enableInView': component.enableInView\r\n      });\r\n      afterComponents[component.appendTo] = elements;\r\n\r\n    }\r\n    app.constant('afterComponents', afterComponents);\r\n    app.component(component.name.toCamelCase(), component.config);\r\n  }\r\n})\r\n;\r\n\r\nconsole.log('Replace Templates');\r\nTemplates.all.forEach((template) => {\r\n  console.log(template.id)\r\n  app.run(($templateCache) => {\r\n    $templateCache.put(template.id, template.template);\r\n  })\r\n})\r\n\r\n//Inject place holders into the after components\r\nObject.keys(afterComponents).forEach((component, i) => {\r\n  let subComponents = afterComponents[component];\r\n/*\r\n  console.log ( subComponents )\r\n  console.log ( subComponents.map(m => `<${m.name} parent-ctrl=\"$ctrl\"></${m.name}>`) )\r\n*/\r\n  app.component(component.toCamelCase(), {\r\n    bindings: {\r\n      parentCtrl: '<'\r\n    },\r\n    template: subComponents.map(m => `<${m.name} parent-ctrl=\"$ctrl\"></${m.name}>`).join(\"\")\r\n  });\r\n});\r\n\r\n","import Explore from './primo/explore'\r\nimport Records from './primo/records'\r\nimport Facets from './primo/facets'\r\nimport View from './primo/view'\r\nimport User from './primo/user'\r\nimport Helper from './primo/explore/helper'\r\n\r\n/**\r\n * Primo main entry class\r\n */\r\nexport default class Primo {\r\n  /**\r\n   * Return version information\r\n   * @return {string}\r\n   */\r\n  static get version() {\r\n    let _version = \"0.0.10\";\r\n    return `Library:${_version} - Primo:${window.appConfig['system-configuration'].Primo_Version_Number}:${window.appConfig['system-configuration'].Primo_HotFix_Number}`;\r\n  }\r\n\r\n  /**\r\n   * Check if angular.reloadWithDebugInfo() has ran\r\n   * @return {boolean}\r\n   */\r\n  static isDebugEnabled() {\r\n    return Helper.isDebugEnabled();\r\n  }\r\n\r\n  /**\r\n   * Did the script ran on a Primo site\r\n   * @return {boolean}\r\n   */\r\n  static isPrimoAvailable() {\r\n    return Helper.isPrimoAvailable();\r\n  }\r\n\r\n  /**\r\n   * This is a proxy class\r\n   * @return {Explore}\r\n   */\r\n  static get explore() {\r\n    return Explore;\r\n  }\r\n\r\n  /**\r\n   * Get a pointer to available records\r\n   * @return {Records}\r\n   */\r\n  static get records(){\r\n    return new Promise((resolve, reject) => {\r\n      resolve(new Records(this.explore.components));\r\n    })\r\n    //return new Records(this.explore.components);\r\n  }\r\n\r\n  /**\r\n   * Get a pointer to available facets\r\n   * @return {Facets}\r\n   */\r\n  static get facets(){\r\n    return new Promise((resolve, reject) => {\r\n      resolve(new Facets(this.explore.components));\r\n    })\r\n    //return new Facets(this.explore.components);\r\n  }\r\n\r\n  /**\r\n   * Get a pointer to view related metadata\r\n   * @return {View}\r\n   */\r\n  static get view() {\r\n    return new Promise((resolve, reject) => {\r\n      resolve(new View());\r\n    })\r\n    //return new View();\r\n  }\r\n\r\n  /**\r\n   * Get a pointer to user related metadata\r\n   * @return {User}\r\n   */\r\n  static get user() {\r\n    return new Promise((resolve, reject) => {\r\n      Helper.userDetailsHTTP().then((userDetails)=>{\r\n        Helper.userFinesHTTP().then((userFines) => {\r\n          Helper.userLoansHTTP().then((userLoans) => {\r\n              resolve(new User({details: userDetails, fines: userFines, loans: userLoans}));\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n","import Components from './explore/components'\r\nimport Helper from './explore/helper'\r\n\r\n//this is proxy class\r\nexport default class Explore {\r\n  static get components() {\r\n    let c = new Components();\r\n    Helper.componentNames.forEach((selector) => {\r\n      c.add(selector);\r\n    })\r\n\r\n    return c;\r\n  }\r\n\r\n  static get ui() {\r\n    if (this._ui === undefined) {\r\n      console.error('This is a stub function call \"angular.reloadWithDebugInfo()\" to activate UI');\r\n    }\r\n    return this._ui;\r\n  }\r\n\r\n  static get helper() {\r\n    return Helper;\r\n  }\r\n}\r\n","var cssSelectorGenerator = new(require('../../vendor/css-selector-generator.js')).CssSelectorGenerator;\r\n\r\nimport Helper from './helper'\r\n\r\nclass Component {\r\n  constructor(element){\r\n    this.element = element;\r\n  }\r\n\r\n  blink(){\r\n    Helper.blink(this);\r\n  }\r\n\r\n  get cssPath(){\r\n    return cssSelectorGenerator.getSelector(this.element);\r\n  }\r\n\r\n  get name(){\r\n    return this.element.localName;\r\n  }\r\n\r\n  scope(){\r\n    if (Helper.isDebugEnabled()){\r\n      return angular.element(this.element).scope();\r\n    } else {\r\n      console.error('Please run \"angular.reloadWithDebugInfo()\" first');\r\n    }\r\n  }\r\n\r\n  ctrl(){\r\n    let c = angular.element(this.element).controller(this.name);\r\n    if (c) {\r\n      return c;\r\n    } else {\r\n      console.log('using alternative method to get controller');\r\n      let scope = this.scope();\r\n      if (scope) {\r\n        let scopeChild = scope.$$childTail;\r\n        if (Object.keys(scope).includes('$ctrl')) {\r\n            return scope.$ctrl\r\n        } else if(Object.keys(scope).includes('ctrl')) {\r\n            return scope.ctrl\r\n        } else if (scopeChild && Object.keys(scopeChild).includes('$ctrl')){\r\n            return scopeChild.$ctrl;\r\n        } else if (scopeChild && Object.keys(scopeChild).includes('ctrl')){\r\n            return scopeChild.ctrl;\r\n        } else {\r\n            console.error('No $ctrl defined');\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default class Components {\r\n  constructor(){\r\n\r\n      this._components = {};\r\n  }\r\n\r\n  add(selector) {\r\n    let elements = Helper.querySelectorAll(selector);\r\n    let elementsArray = this._components[selector] || [];\r\n\r\n    elements.forEach((element)=>{\r\n      elementsArray.push(new Component(element));\r\n    });\r\n\r\n    this._components[selector] = elementsArray;\r\n\r\n    return elementsArray;\r\n  }\r\n\r\n  get(selector) {\r\n    return this._components[selector] || null;\r\n  }\r\n\r\n  keys(){\r\n    return Object.keys(this._components);\r\n  }\r\n\r\n}\r\n","export default class Helper {\r\n    static isDebugEnabled() {\r\n        return window.name === 'NG_ENABLE_DEBUG_INFO!' || typeof(angular.element(document.querySelector('prm-logo')).scope()) != 'undefined' ? true : false;\r\n    }\r\n\r\n    static isPrimoAvailable() {\r\n        if ('undefined' !== typeof(window.angular)) {\r\n            if (document.querySelector('primo-explore') !== null) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static get componentNames() {\r\n        let tags = Array.from(document.getElementsByTagName('*'));\r\n        let componentNames = [];\r\n        for (let tag of tags) {\r\n            let tagName = tag.localName;\r\n            if (/^prm-/.test(tagName) || /^primo-/.test(tagName)) {\r\n                if (!componentNames.includes(tagName)) {\r\n                    componentNames.push(tagName);\r\n                }\r\n            }\r\n        }\r\n\r\n        componentNames = componentNames.sort().filter((e, i, a) => i === a.findIndex((e2) => e === e2));\r\n        return componentNames;\r\n    }\r\n\r\n    static querySelectorAll(selector) {\r\n        return Array.from(document.querySelectorAll(selector));\r\n    }\r\n\r\n    static injector() {\r\n      let c = Primo.explore.components.get('primo-explore');\r\n      if (c && c.length > 0) {\r\n          let primoExplore = angular.element(c[0].element);\r\n          let injector     = primoExplore.injector();\r\n          if (injector){\r\n            return injector;\r\n          }\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    static get http() {\r\n      let injector = this.injector();\r\n      if (injector) {\r\n        let h = injector.get('$http');\r\n        if (h) {\r\n          return h;\r\n        }\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n\r\n    static loadScript(scriptURL) {\r\n      if (window.angular) {\r\n          let appInjector = angular.injector(['ng','angularLoad']);\r\n          if (appInjector) {\r\n              let angularLoad = appInjector.get('angularLoad');\r\n              if (angularLoad) {\r\n                return angularLoad.loadScript(scriptURL);\r\n              }\r\n          }\r\n      }\r\n    }\r\n\r\n    static rootScope() {\r\n      let injector = this.injector();\r\n      if (injector) {\r\n          let rootScope    = injector.get('$rootScope');\r\n          if (rootScope) {\r\n            return rootScope;\r\n          }\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    static userSessionManagerService() {\r\n      let rootScope = this.rootScope();\r\n      if (rootScope) {\r\n        return rootScope.$$childHead.$ctrl.userSessionManagerService;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    static jwtData() {\r\n      let uSMS = this.userSessionManagerService();\r\n      if (uSMS) {\r\n        let jwtData = uSMS.jwtUtilService.getDecodedToken() || {};\r\n        return jwtData;\r\n      }\r\n    }\r\n\r\n    static userDetails() {\r\n      return new Promise((resolve, reject) => {\r\n        this.userSessionManagerService().$localForage.getItem('userDetails').then(userDetails => resolve(userDetails));\r\n      });\r\n    }\r\n\r\n    static userDetailsHTTP() {\r\n      let viewCode = this.jwtData().viewId || window.appConfig['vid'];\r\n      return new Promise( (resolve,reject) => {\r\n        this.http.get(`/primo_library/libweb/webservices/rest/v1/usersettings?vid=${viewCode}`).then(userDetails => resolve(userDetails.data));\r\n      });\r\n    }\r\n\r\n    static userFinesHTTP() {\r\n      return new Promise((resolve, reject) => {\r\n        this.http.get('/primo_library/libweb/webservices/rest/v1/myaccount/fines').then(userFines => {\r\n          try {\r\n            let data = userFines.data;\r\n            if (data.status == 'ok') {\r\n                let fines = data.data.fines;\r\n                resolve(fines.fine);\r\n            } else {\r\n              console.log('No fines');\r\n              resolve([]);\r\n            }\r\n          }\r\n          catch(error){\r\n            resolve([]);\r\n          }\r\n        }\r\n        );\r\n      });\r\n    }\r\n\r\n    static userLoansHTTP() {\r\n      return new Promise((resolve, reject) => {\r\n        this.http.get('/primo_library/libweb/webservices/rest/v1/myaccount/loans').then(userLoans => {\r\n          try {\r\n            let data = userLoans.data;\r\n            if (data.status == 'ok') {\r\n                let loans = data.data.loans;\r\n                resolve(loans.loan);\r\n            } else {\r\n              console.log('No loans');\r\n              resolve([]);\r\n            }\r\n          }\r\n          catch(error){\r\n            resolve([]);\r\n          }\r\n        }\r\n        );\r\n      });\r\n    }\r\n\r\n    static blink(component, numberOfBlinks = 4) {\r\n        let intervalId = null;\r\n        let borderElement = null;\r\n        let index = Math.floor(Math.random() * (1000 - 1)) + 1;\r\n        let borderSelector = component.element.cssPath + index + 'Rect';\r\n\r\n        let createBorderElement = () => {\r\n            if (component && component.element) {\r\n                let elementRect = component.element.getBoundingClientRect();\r\n                let borderElement = document.createElement('div');\r\n                let index = Math.floor(Math.random() * (1000 - 1)) + 1;\r\n                borderElement.setAttribute('id', borderSelector);\r\n                borderElement.style.border = '3px solid red';\r\n                borderElement.style.position = 'absolute';\r\n                borderElement.style.top = elementRect.top + 'px';\r\n                borderElement.style.height = elementRect.height + 'px';\r\n                borderElement.style.width = elementRect.width + 'px';\r\n                borderElement.style.left = elementRect.left + 'px';\r\n                document.body.appendChild(borderElement);\r\n\r\n                return document.querySelector('#' + borderSelector);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        let removeBorderElement = () => {\r\n          if (borderElement) {\r\n            borderElement.remove();\r\n          }\r\n        }\r\n\r\n        let blinkBorderElement = (numberOfBlinks = 4) => {\r\n            window.clearInterval(intervalId);\r\n\r\n            if (numberOfBlinks < 0) {\r\n                removeBorderElement();\r\n            } else {\r\n                borderElement.style.display = ((numberOfBlinks % 2) == 0) ? 'none' : 'block';\r\n                numberOfBlinks--;\r\n                intervalId = window.setInterval(blinkBorderElement, 1000, numberOfBlinks);\r\n            }\r\n        }\r\n\r\n        borderElement = createBorderElement();\r\n        blinkBorderElement(numberOfBlinks);\r\n    }\r\n}\r\n","import Components from './explore/components'\r\nimport Helper from './explore/helper'\r\n\r\nexport default class Facets {\r\n    constructor(components) {\r\n      return this._facets(components);\r\n    }\r\n    _facets(components) {\r\n        try {\r\n            if (components) {\r\n                let c = components.get('prm-facet-after');\r\n                if (c && c.length > 0) {\r\n                    let ctrl = c[0].ctrl;\r\n                    return ctrl.facetService.results;\r\n                }\r\n            }\r\n        } catch (e) {\r\n          console.log('trying to get facets through the rootScope');\r\n          try {\r\n              return Helper.userSessionManagerService().searchStateService.resultObject.facets;\r\n          } catch(e) {\r\n              console.error('unable to retrieve facets');\r\n          }\r\n        }\r\n\r\n        return [];\r\n    }\r\n}\r\n","import Components from './explore/components'\r\nimport Helper from './explore/helper'\r\n\r\nexport default class Records {\r\n    constructor(components) {\r\n      return this._items(components);\r\n    }\r\n    _items(components) {\r\n        try {\r\n            if (components) {\r\n                let c = components.get('prm-search-result-list-after');\r\n                if (c && c.length > 0) {\r\n                    let ctrl = c[0].ctrl();\r\n                    if (ctrl) {\r\n                        return ctrl.itemlist;\r\n                    }\r\n                    throw \"try again\";\r\n                }\r\n            }\r\n        } catch (e) {\r\n          console.log('trying to get records through the rootScope');\r\n          try {\r\n              return Helper.userSessionManagerService().searchStateService.resultObject.data;\r\n          } catch(e) {\r\n              console.error('unable to retrieve items');\r\n          }\r\n        }\r\n\r\n        return [];\r\n    }\r\n}\r\n","import Helper from './explore/helper'\r\n\r\nexport default class User {\r\n  constructor(user = _skelUser) {\r\n    let uSms = Helper.userSessionManagerService();\r\n    let jwtData = Helper.jwtData();\r\n    let self = this;\r\n\r\n    return {\r\n        id: jwtData.user || '',\r\n        email: user.details.email || '',\r\n        name: jwtData.userName || 'Guest',\r\n        display_name: uSms.getUserNameForDisplay(),\r\n        isLoggedIn: () => uSms.getUserName().length > 0,\r\n        isOnCampus: () => jwtData.onCampus == \"true\" ? true : false,\r\n        fines: user.fines,\r\n        loans: user.loans\r\n      };\r\n  }\r\n\r\n  get _skelUser() {\r\n    return {\r\n      details: {},\r\n      fines: {},\r\n      loans: {}\r\n    }\r\n  }\r\n}\r\n","import Helper from './explore/helper'\r\n\r\nexport default class View {\r\n    constructor() {\r\n      let uSms = Helper.userSessionManagerService();\r\n      let jwtData = Helper.jwtData();\r\n\r\n      return {\r\n        code: jwtData.viewId || window.appConfig['vid'],\r\n        institution: {\r\n            code: jwtData.viewInstitutionCode,\r\n            name: window.appConfig['primo-view']['attributes-map'].institution\r\n        },\r\n        interfaceLanguage: uSms.getUserLanguage() || window.appConfig['primo-view']['attributes-map'].interfaceLanguage,\r\n        ip: {\r\n          address: jwtData.ip\r\n        }\r\n      }\r\n    }\r\n}\r\n","(function() {\r\n  var CssSelectorGenerator, root,\r\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\r\n\r\n  CssSelectorGenerator = (function() {\r\n    CssSelectorGenerator.prototype.default_options = {\r\n      selectors: ['id', 'class', 'tag', 'nthchild']\r\n    };\r\n\r\n    function CssSelectorGenerator(options) {\r\n      if (options == null) {\r\n        options = {};\r\n      }\r\n      this.options = {};\r\n      this.setOptions(this.default_options);\r\n      this.setOptions(options);\r\n    }\r\n\r\n    CssSelectorGenerator.prototype.setOptions = function(options) {\r\n      var key, results, val;\r\n      if (options == null) {\r\n        options = {};\r\n      }\r\n      results = [];\r\n      for (key in options) {\r\n        val = options[key];\r\n        if (this.default_options.hasOwnProperty(key)) {\r\n          results.push(this.options[key] = val);\r\n        } else {\r\n          results.push(void 0);\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.isElement = function(element) {\r\n      return !!((element != null ? element.nodeType : void 0) === 1);\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getParents = function(element) {\r\n      var current_element, result;\r\n      result = [];\r\n      if (this.isElement(element)) {\r\n        current_element = element;\r\n        while (this.isElement(current_element)) {\r\n          result.push(current_element);\r\n          current_element = current_element.parentNode;\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getTagSelector = function(element) {\r\n      return this.sanitizeItem(element.tagName.toLowerCase());\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.sanitizeItem = function(item) {\r\n      var characters;\r\n      characters = (item.split('')).map(function(character) {\r\n        if (character === ':') {\r\n          return \"\\\\\" + (':'.charCodeAt(0).toString(16).toUpperCase()) + \" \";\r\n        } else if (/[ !\"#$%&'()*+,.\\/;<=>?@\\[\\\\\\]^`{|}~]/.test(character)) {\r\n          return \"\\\\\" + character;\r\n        } else {\r\n          return escape(character).replace(/\\%/g, '\\\\');\r\n        }\r\n      });\r\n      return characters.join('');\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getIdSelector = function(element) {\r\n      var id, sanitized_id;\r\n      id = element.getAttribute('id');\r\n      if ((id != null) && (id !== '') && !(/\\s/.exec(id)) && !(/^\\d/.exec(id))) {\r\n        sanitized_id = \"#\" + (this.sanitizeItem(id));\r\n        if (element.ownerDocument.querySelectorAll(sanitized_id).length === 1) {\r\n          return sanitized_id;\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getClassSelectors = function(element) {\r\n      var class_string, item, result;\r\n      result = [];\r\n      class_string = element.getAttribute('class');\r\n      if (class_string != null) {\r\n        class_string = class_string.replace(/\\s+/g, ' ');\r\n        class_string = class_string.replace(/^\\s|\\s$/g, '');\r\n        if (class_string !== '') {\r\n          result = (function() {\r\n            var k, len, ref, results;\r\n            ref = class_string.split(/\\s+/);\r\n            results = [];\r\n            for (k = 0, len = ref.length; k < len; k++) {\r\n              item = ref[k];\r\n              results.push(\".\" + (this.sanitizeItem(item)));\r\n            }\r\n            return results;\r\n          }).call(this);\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getAttributeSelectors = function(element) {\r\n      var attribute, blacklist, k, len, ref, ref1, result;\r\n      result = [];\r\n      blacklist = ['id', 'class'];\r\n      ref = element.attributes;\r\n      for (k = 0, len = ref.length; k < len; k++) {\r\n        attribute = ref[k];\r\n        if (ref1 = attribute.nodeName, indexOf.call(blacklist, ref1) < 0) {\r\n          result.push(\"[\" + attribute.nodeName + \"=\" + attribute.nodeValue + \"]\");\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getNthChildSelector = function(element) {\r\n      var counter, k, len, parent_element, sibling, siblings;\r\n      parent_element = element.parentNode;\r\n      if (parent_element != null) {\r\n        counter = 0;\r\n        siblings = parent_element.childNodes;\r\n        for (k = 0, len = siblings.length; k < len; k++) {\r\n          sibling = siblings[k];\r\n          if (this.isElement(sibling)) {\r\n            counter++;\r\n            if (sibling === element) {\r\n              return \":nth-child(\" + counter + \")\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.testSelector = function(element, selector) {\r\n      var is_unique, result;\r\n      is_unique = false;\r\n      if ((selector != null) && selector !== '') {\r\n        result = element.ownerDocument.querySelectorAll(selector);\r\n        if (result.length === 1 && result[0] === element) {\r\n          is_unique = true;\r\n        }\r\n      }\r\n      return is_unique;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getAllSelectors = function(element) {\r\n      var result;\r\n      result = {\r\n        t: null,\r\n        i: null,\r\n        c: null,\r\n        a: null,\r\n        n: null\r\n      };\r\n      if (indexOf.call(this.options.selectors, 'tag') >= 0) {\r\n        result.t = this.getTagSelector(element);\r\n      }\r\n      if (indexOf.call(this.options.selectors, 'id') >= 0) {\r\n        result.i = this.getIdSelector(element);\r\n      }\r\n      if (indexOf.call(this.options.selectors, 'class') >= 0) {\r\n        result.c = this.getClassSelectors(element);\r\n      }\r\n      if (indexOf.call(this.options.selectors, 'attribute') >= 0) {\r\n        result.a = this.getAttributeSelectors(element);\r\n      }\r\n      if (indexOf.call(this.options.selectors, 'nthchild') >= 0) {\r\n        result.n = this.getNthChildSelector(element);\r\n      }\r\n      return result;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.testUniqueness = function(element, selector) {\r\n      var found_elements, parent;\r\n      parent = element.parentNode;\r\n      found_elements = parent.querySelectorAll(selector);\r\n      return found_elements.length === 1 && found_elements[0] === element;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.testCombinations = function(element, items, tag) {\r\n      var item, k, l, len, len1, ref, ref1;\r\n      ref = this.getCombinations(items);\r\n      for (k = 0, len = ref.length; k < len; k++) {\r\n        item = ref[k];\r\n        if (this.testUniqueness(element, item)) {\r\n          return item;\r\n        }\r\n      }\r\n      if (tag != null) {\r\n        ref1 = items.map(function(item) {\r\n          return tag + item;\r\n        });\r\n        for (l = 0, len1 = ref1.length; l < len1; l++) {\r\n          item = ref1[l];\r\n          if (this.testUniqueness(element, item)) {\r\n            return item;\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getUniqueSelector = function(element) {\r\n      var found_selector, k, len, ref, selector_type, selectors;\r\n      selectors = this.getAllSelectors(element);\r\n      ref = this.options.selectors;\r\n      for (k = 0, len = ref.length; k < len; k++) {\r\n        selector_type = ref[k];\r\n        switch (selector_type) {\r\n          case 'id':\r\n            if (selectors.i != null) {\r\n              return selectors.i;\r\n            }\r\n            break;\r\n          case 'tag':\r\n            if (selectors.t != null) {\r\n              if (this.testUniqueness(element, selectors.t)) {\r\n                return selectors.t;\r\n              }\r\n            }\r\n            break;\r\n          case 'class':\r\n            if ((selectors.c != null) && selectors.c.length !== 0) {\r\n              found_selector = this.testCombinations(element, selectors.c, selectors.t);\r\n              if (found_selector) {\r\n                return found_selector;\r\n              }\r\n            }\r\n            break;\r\n          case 'attribute':\r\n            if ((selectors.a != null) && selectors.a.length !== 0) {\r\n              found_selector = this.testCombinations(element, selectors.a, selectors.t);\r\n              if (found_selector) {\r\n                return found_selector;\r\n              }\r\n            }\r\n            break;\r\n          case 'nthchild':\r\n            if (selectors.n != null) {\r\n              return selectors.n;\r\n            }\r\n        }\r\n      }\r\n      return '*';\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getSelector = function(element) {\r\n      var all_selectors, item, k, l, len, len1, parents, result, selector, selectors;\r\n      all_selectors = [];\r\n      parents = this.getParents(element);\r\n      for (k = 0, len = parents.length; k < len; k++) {\r\n        item = parents[k];\r\n        selector = this.getUniqueSelector(item);\r\n        if (selector != null) {\r\n          all_selectors.push(selector);\r\n        }\r\n      }\r\n      selectors = [];\r\n      for (l = 0, len1 = all_selectors.length; l < len1; l++) {\r\n        item = all_selectors[l];\r\n        selectors.unshift(item);\r\n        result = selectors.join(' > ');\r\n        if (this.testSelector(element, result)) {\r\n          return result;\r\n        }\r\n      }\r\n      return null;\r\n    };\r\n\r\n    CssSelectorGenerator.prototype.getCombinations = function(items) {\r\n      var i, j, k, l, ref, ref1, result;\r\n      if (items == null) {\r\n        items = [];\r\n      }\r\n      result = [[]];\r\n      for (i = k = 0, ref = items.length - 1; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) {\r\n        for (j = l = 0, ref1 = result.length - 1; 0 <= ref1 ? l <= ref1 : l >= ref1; j = 0 <= ref1 ? ++l : --l) {\r\n          result.push(result[j].concat(items[i]));\r\n        }\r\n      }\r\n      result.shift();\r\n      result = result.sort(function(a, b) {\r\n        return a.length - b.length;\r\n      });\r\n      result = result.map(function(item) {\r\n        return item.join('');\r\n      });\r\n      return result;\r\n    };\r\n\r\n    return CssSelectorGenerator;\r\n\r\n  })();\r\n\r\n  if (typeof define !== \"undefined\" && define !== null ? define.amd : void 0) {\r\n    define([], function() {\r\n      return CssSelectorGenerator;\r\n    });\r\n  } else {\r\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\r\n    root.CssSelectorGenerator = CssSelectorGenerator;\r\n  }\r\n\r\n}).call(this);\r\n","/*\r\n  Replace templates.\r\n\r\n  Replace the default primo templates http://localhost:8003/primo-explore/lib/templates.js\r\n  with custom templates\r\n\r\n  KULeuven/LIBIS (c) 2018\r\n  Tom Vanmechelen\r\n*/\r\nimport './utils'\r\n\r\n/* import your templates */\r\nimport prmSearchResultAvailabilityLineHTML from '../html/templates/prm-search-result-availability-line.html'\r\n\r\nexport default class Templates {\r\n    static get all() {\r\n        /*\r\n          id = templateId in the templateCache\r\n          template = the imported tempalte\r\n          enabled = true/false should the component be created\r\n          enableInView = regex to define in which views the template has to be replaced.\r\n\r\n          ex. {id: 'components/search/topbar/userArea/user-area.html', template: userAreaHTML, enabled: true, enableInView: '.*'}\r\n          results in:\r\n            $templateCache.put('components/search/topbar/userArea/user-area.html',userAreaHTML);\r\n        */\r\n        return [      \r\n            {\r\n                id: 'components/search/searchResult/searchResultAvailability/searchResultAvailabilityLine.html',\r\n                template: prmSearchResultAvailabilityLineHTML,\r\n                enabled: true,\r\n                enableInView: 'REGIONAL'\r\n            }\r\n        ].filter((template) => (template.enabled && new RegExp(template.enableInView).test(window.appConfig.vid)));\r\n    }\r\n}\r\n","/*\r\n  General\r\n\r\n  KULeuven/LIBIS (c) 2017\r\n  Mehmet Celik\r\n*/\r\nString.prototype.toCamelCase = function () {\r\n  return this.split('-').map((d, i, a) => i > 0 ? d.charAt(0).toUpperCase() + d.slice(1) : d).join('');\r\n}\r\n\r\n/*\r\nangular.module('googleAnalytics', []);\r\nangular.module('googleAnalytics').run(function ($rootScope, $interval, analyticsOptions) {\r\n\tif(analyticsOptions.hasOwnProperty(\"enabled\") && analyticsOptions.enabled) {\r\n\t\tif(analyticsOptions.hasOwnProperty(\"siteId\") && analyticsOptions.siteId != '') {\r\n\t\t\t\r\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\r\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\r\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\r\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\r\n            })(window,document,'script','dataLayer',analyticsOptions.siteId);\r\n        }\r\n\r\n        const inlineScriptTag = document.createElement('noscript');\r\n        inlineScriptTag.type = 'text/javascript';\r\n\r\n        const inlineCode = '<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-WR259MX\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>';\r\n\r\n        // Methods of adding inner text sometimes don't work across browsers.\r\n        try {\r\n          inlineScriptTag.appendChild(document.createTextNode(inlineCode));\r\n        } catch (e) {\r\n          inlineScriptTag.text = inlineCode;\r\n        }\r\n\r\n        document.querySelector('body').appendChild(inlineScriptTag);\t\t\r\n\t}\r\n});\r\nangular.module('googleAnalytics').value('analyticsOptions', {\r\n\tenabled: false,\r\n\tsiteId: '',\r\n\tdefaultTitle: ''\r\n});\r\n*/\r\n\r\n//intercept api calls for database search and change to KUL (only regional views)\r\n  /*\r\nvar reg_views = [\"KULeuven_TMOREM\", \"KULeuven_TMOREK\", \"KULeuven_UCLL\", \"KULeuven_LUCA\", \"KULeuven_ODISEE\"];\r\nif (reg_views.includes(window.appConfig.vid)) {\r\n  let app = angular.module('viewCustom', [])\r\n    .factory('httpCallInterceptor', [() => {\r\n      var httpCallInterceptor = {\r\n        request: function(config){\r\n          if (config.url.includes('pnxs') && !config.url.includes('delivery') && config.params) {\r\n            //console.log(config);\r\n\r\n            if(config.params.databases){\r\n              config.params.inst = 'KUL';\r\n              config.params.vid = 'KULeuven';\r\n            }\r\n\r\n            return config;\r\n          }\r\n          return config;\r\n        }\r\n      }\r\n      return httpCallInterceptor;\r\n    }])\r\n    .config(['$httpProvider', ($httpProvider) => {\r\n      $httpProvider.interceptors.push('httpCallInterceptor');\r\n    }]);\r\n}\r\n*/\r\n/*\r\nangular.element.prototype.closestClass = function (className) {\r\n  return (function closest(element, className) {\r\n    if (element[0].nodeName === 'HTML') {\r\n      return null;\r\n    } else if (element.hasClass(className)) {\r\n      return element;\r\n    } else {\r\n      return closest(element.parent(), className);\r\n    }\r\n  })(this, className);\r\n};\r\n\r\nangular.element.prototype.closestNode = function (nodeName) {\r\n  return (function closest(element, nodeName) {\r\n    if (element[0].nodeName === 'HTML') {\r\n      return null;\r\n    } else if (element[0].nodeName == nodeName.toUpperCase()) {\r\n      return element;\r\n    } else {\r\n      return closest(element.parent(), nodeName);\r\n    }\r\n  })(this, nodeName);\r\n};\r\n*/\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwcmltby1leHBsb3JlL2N1c3RvbS8zMktVTF9LVUwtUkVHSU9OQUwvanMvY29tcG9uZW50cy5qcyIsInByaW1vLWV4cGxvcmUvY3VzdG9tLzMyS1VMX0tVTC1SRUdJT05BTC9qcy9jb21wb25lbnRzL3BybUFsbWFPdGhlck1lbWJlcnNBZnRlci9yZWdWaWV3T3RoZXJNZW1iZXJzLmpzIiwicHJpbW8tZXhwbG9yZS9jdXN0b20vMzJLVUxfS1VMLVJFR0lPTkFML2pzL2NvbXBvbmVudHMvcHJtU2VhcmNoUmVzdWx0QXZhaWxhYmlsaXR5TGluZUFmdGVyL3JlZ1ZpZXdBdmFpbGFiaWxpdHlMaW5lQ29uZmlnLmpzIiwicHJpbW8tZXhwbG9yZS9jdXN0b20vMzJLVUxfS1VMLVJFR0lPTkFML2pzL21haW4uanMiLCJwcmltby1leHBsb3JlL2N1c3RvbS8zMktVTF9LVUwtUkVHSU9OQUwvanMvcHJpbW8tZXhwbG9yZS1kb20vanMvcHJpbW8uanMiLCJwcmltby1leHBsb3JlL2N1c3RvbS8zMktVTF9LVUwtUkVHSU9OQUwvanMvcHJpbW8tZXhwbG9yZS1kb20vanMvcHJpbW8vZXhwbG9yZS5qcyIsInByaW1vLWV4cGxvcmUvY3VzdG9tLzMyS1VMX0tVTC1SRUdJT05BTC9qcy9wcmltby1leHBsb3JlLWRvbS9qcy9wcmltby9leHBsb3JlL2NvbXBvbmVudHMuanMiLCJwcmltby1leHBsb3JlL2N1c3RvbS8zMktVTF9LVUwtUkVHSU9OQUwvanMvcHJpbW8tZXhwbG9yZS1kb20vanMvcHJpbW8vZXhwbG9yZS9oZWxwZXIuanMiLCJwcmltby1leHBsb3JlL2N1c3RvbS8zMktVTF9LVUwtUkVHSU9OQUwvanMvcHJpbW8tZXhwbG9yZS1kb20vanMvcHJpbW8vZmFjZXRzLmpzIiwicHJpbW8tZXhwbG9yZS9jdXN0b20vMzJLVUxfS1VMLVJFR0lPTkFML2pzL3ByaW1vLWV4cGxvcmUtZG9tL2pzL3ByaW1vL3JlY29yZHMuanMiLCJwcmltby1leHBsb3JlL2N1c3RvbS8zMktVTF9LVUwtUkVHSU9OQUwvanMvcHJpbW8tZXhwbG9yZS1kb20vanMvcHJpbW8vdXNlci5qcyIsInByaW1vLWV4cGxvcmUvY3VzdG9tLzMyS1VMX0tVTC1SRUdJT05BTC9qcy9wcmltby1leHBsb3JlLWRvbS9qcy9wcmltby92aWV3LmpzIiwicHJpbW8tZXhwbG9yZS9jdXN0b20vMzJLVUxfS1VMLVJFR0lPTkFML2pzL3ByaW1vLWV4cGxvcmUtZG9tL2pzL3ZlbmRvci9jc3Mtc2VsZWN0b3ItZ2VuZXJhdG9yLmpzIiwicHJpbW8tZXhwbG9yZS9jdXN0b20vMzJLVUxfS1VMLVJFR0lPTkFML2pzL3RlbXBsYXRlcy5qcyIsInByaW1vLWV4cGxvcmUvY3VzdG9tLzMyS1VMX0tVTC1SRUdJT05BTC9qcy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztxakJDQUE7Ozs7Ozs7Ozs7QUFVQTs7O0FBREE7O0FBRUE7O0FBQ0E7Ozs7SUFHcUIsZTs7Ozs7Ozt3QkFFRjtBQUNmOzs7Ozs7Ozs7OztBQVlBLGFBQU87QUFDTDs7OztBQUlBLFFBQUMsTUFBTSxvQkFBUCxFQUE2QixRQUFRLDhDQUFyQyxFQUFnRSxTQUFTLElBQXpFLEVBQStFLFVBQVUsOEJBQXpGLEVBQXlILGNBQWMsSUFBdkksRUFMSyxFQU1MLEVBQUMsTUFBTSx5QkFBUCxFQUFrQyxRQUFRLDREQUExQyxFQUF5RSxTQUFTLElBQWxGLEVBQXdGLFVBQVUsMkNBQWxHLEVBQStJLGNBQWMsSUFBN0osRUFOSyxFQVFMLE1BUkssQ0FRRyxVQUFDLFNBQUQ7QUFBQSxlQUFpQixVQUFVLE9BQVYsSUFBcUIsSUFBSSxNQUFKLENBQVcsVUFBVSxZQUFyQixFQUFtQyxJQUFuQyxDQUF3QyxPQUFPLFNBQVAsQ0FBaUIsR0FBekQsQ0FBdEM7QUFBQSxPQVJILENBQVA7QUFTRDs7Ozs7O2tCQXhCa0IsZTs7Ozs7Ozs7Ozs7OztJQ2ZmLDZCO0FBQ0oseUNBQVksTUFB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RCxFQW9URyxJQXBUSDs7Ozs7Ozs7O3FqQkNBQTs7Ozs7Ozs7Ozs7QUFTQTs7OztBQUVBOzs7SUFHcUIsUzs7Ozs7Ozs0QkFDQTtBQUNiOzs7Ozs7Ozs7QUFVQSxtQkFBTyxDQUNIO0FBQ0ksb0JBQUksMkZBRFI7QUFFSSwwQkFBVSxtQ0FGZDtBQUdJLHlCQUFTLElBSGI7QUFJSSw4QkFBYztBQUpsQixhQURHLEVBT0wsTUFQSyxDQU9FLFVBQUMsUUFBRDtBQUFBLHVCQUFlLFNBQVMsT0FBVCxJQUFvQixJQUFJLE1BQUosQ0FBVyxTQUFTLFlBQXBCLEVBQWtDLElBQWxDLENBQXVDLE9BQU8sU0FBUCxDQUFpQixHQUF4RCxDQUFuQztBQUFBLGFBUEYsQ0FBUDtBQVFIOzs7Ozs7a0JBcEJnQixTOzs7OztBQ2RyQjs7Ozs7O0FBTUEsT0FBTyxTQUFQLENBQWlCLFdBQWpCLEdBQStCLFlBQVk7QUFDekMsU0FBTyxLQUFLLEtBQUwsQ0FBVyxHQUFYLEVBQWdCLEdBQWhCLENBQW9CLFVBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0FBQUEsV0FBYSxJQUFJLENBQUosR0FBUSxFQUFFLE1BQUYsQ0FBUyxDQUFULEVBQVksV0FBWixLQUE0QixFQUFFLEtBQUYsQ0FBUSxDQUFSLENBQXBDLEdBQWlELENBQTlEO0FBQUEsR0FBcEIsRUFBcUYsSUFBckYsQ0FBMEYsRUFBMUYsQ0FBUDtBQUNELENBRkQ7O0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUNBO0FBQ0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEyQkYiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKlxyXG4gIERlY2xhcmUgeW91ciBjb21wb25lbnRzIGhlcmUuXHJcblxyXG4gIFJld3JpdGUgdGhpcyB3aGVuIGltcG9ydHMgY2FuIGJlIGRvbmUgZHluYW1pY2FsbHlcclxuICBodHRwOi8vMmFsaXR5LmNvbS8yMDE3LzAxL2ltcG9ydC1vcGVyYXRvci5odG1sXHJcblxyXG4gIEtVTGV1dmVuL0xJQklTIChjKSAyMDE3XHJcbiAgTWVobWV0IENlbGlrXHJcbiovXHJcbmltcG9ydCAnLi91dGlscyc7XHJcbi8qIGltcG9ydCB5b3VyIGNvbXBvbmVudCBjb25maWd1cmF0aW9uKi9cclxuaW1wb3J0IHtyZWdWaWV3T3RoZXJNZW1iZXJzQ29uZmlnfSBmcm9tICcuL2NvbXBvbmVudHMvcHJtQWxtYU90aGVyTWVtYmVyc0FmdGVyL3JlZ1ZpZXdPdGhlck1lbWJlcnMnXHJcbmltcG9ydCB7cmVnVmlld0F2YWlsYWJpbGl0eUxpbmVDb25maWd9IGZyb20gJy4vY29tcG9uZW50cy9wcm1TZWFyY2hSZXN1bHRBdmFpbGFiaWxpdHlMaW5lQWZ0ZXIvcmVnVmlld0F2YWlsYWJpbGl0eUxpbmVDb25maWcnXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWZ0ZXJDb21wb25lbnRzIHtcclxuXHJcbiAgc3RhdGljIGdldCBhbGwoKSB7XHJcbiAgICAvKlxyXG4gICAgICBuYW1lID0gdGhlIHN1YiBlbGVtZW50IGluIHRoZSBhZnRlciBlbGVtZW50XHJcbiAgICAgIGNvbmZpZyA9IHRoZSBpbXBvcnRlZCBjb25maWd1cmF0aW9uIG9iamVjdFxyXG4gICAgICBlbmFibGVkID0gdHJ1ZS9mYWxzZSBzaG91bGQgdGhlIGNvbXBvbmVudCBiZSBjcmVhdGVkXHJcbiAgICAgIGFwcGVuZFRvID0gVGhlIGNvbXBvbmVudCBzaG91bGQgYmUgY3JlYXRlZCBpbiB0aGlzIGFmdGVyIGNvbXBvbmVudC5cclxuXHJcbiAgICAgIGV4LiB7bmFtZTogJ2hvbWUtaWNvbicsIGNvbmZpZzogaG9tZUljb25Db25maWcsIGVuYWJsZWQ6IHRydWUsIGFwcGVuZFRvOiAncHJtLWxvZ28tYWZ0ZXInfVxyXG4gICAgICByZXN1bHRzIGluOlxyXG4gICAgICAgIDxwcm0tbG9nby1hZnRlciBwYXJlbnRDdHJsPSckY3RybCc+XHJcbiAgICAgICAgICA8aG9tZS1pY29uIHBhcmVudEN0cmw9JyRjdHJsJz48L2hvbWUtaWNvbj5cclxuICAgICAgICA8L3BybS1sb2dvLWFmdGVyPlxyXG4gICAgKi9cclxuICAgIHJldHVybiBbXHJcbiAgICAgIC8qXHJcbiAgICAgIHtuYW1lOiAnbGliaXMtZXhwZXJpbWVudCcsIGNvbmZpZzogZXhwZXJpbWVudENvbmZpZywgZW5hYmxlZDogZmFsc2UsIGFwcGVuZFRvOiAncHJtLW1lc3NhZ2VzLWFuZC1ibG9ja3Mtb3ZlcnZpZXctYWZ0ZXInLCBlbmFibGVJblZpZXc6ICcuKid9LFxyXG4gICAgICB7bmFtZTogJ2xpYmlzLXJlbW92ZS11c2VyLWFyZWEnLCBjb25maWc6IHJlbW92ZVVzZXJBcmVhQ29uZmlnLCBlbmFibGVkOiBmYWxzZSwgYXBwZW5kVG86ICdwcm0tdXNlci1hcmVhLWV4cGFuZGFibGUtYWZ0ZXInLCBlbmFibGVJblZpZXc6ICcuKid9LCAgICAgIFxyXG4gICAgICAqL1xyXG4gICAgICB7bmFtZTogJ2xpYmlzLW9ubHktbWVtYmVycycsIGNvbmZpZzogcmVnVmlld090aGVyTWVtYmVyc0NvbmZpZywgZW5hYmxlZDogdHJ1ZSwgYXBwZW5kVG86ICdwcm0tYWxtYS1vdGhlci1tZW1iZXJzLWFmdGVyJywgZW5hYmxlSW5WaWV3OiAnLionfSxcclxuICAgICAge25hbWU6ICdsaWJpcy1hdmFpbGFiaWxpdHktbGluZScsIGNvbmZpZzogcmVnVmlld0F2YWlsYWJpbGl0eUxpbmVDb25maWcsIGVuYWJsZWQ6IHRydWUsIGFwcGVuZFRvOiAncHJtLXNlYXJjaC1yZXN1bHQtYXZhaWxhYmlsaXR5LWxpbmUtYWZ0ZXInLCBlbmFibGVJblZpZXc6ICcuKid9LFxyXG5cclxuICAgIF0uZmlsdGVyKCAoY29tcG9uZW50KSA9PiAoIGNvbXBvbmVudC5lbmFibGVkICYmIG5ldyBSZWdFeHAoY29tcG9uZW50LmVuYWJsZUluVmlldykudGVzdCh3aW5kb3cuYXBwQ29uZmlnLnZpZCkgKSApO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyByZWdWaWV3T3RoZXJNZW1iZXJzQ29udHJvbGxlciB7XHJcbiAgY29uc3RydWN0b3IoJHNjb3BlLCAkZWxlbWVudCwgJGNvbXBpbGUsICRodHRwLCAkcm9vdFNjb3BlKSB7XHJcbiAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLiRzY29wZSA9ICRzY29wZTtcclxuICAgIHNlbGYuJHJvb3RTY29wZSA9ICRyb290U2NvcGU7XHJcbiAgICBzZWxmLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbi8qXHJcbiAgICBjb25zb2xlLmxvZyggICRyb290U2NvcGUgKVxyXG4gICAgY29uc29sZS5sb2coIHNlbGYgKVxyXG4gICAgY29uc29sZS5sb2coICBzZWxmLnBhcmVudEN0cmwucGFyZW50Q3RybCApXHJcbiovXHJcbiAgICBsZXQgaXRlbURlbGl2ZXJ5ID0gc2VsZi5wYXJlbnRDdHJsLnBhcmVudEN0cmwuJHNjb3BlLiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LiRjdHJsLml0ZW0uZGVsaXZlcnk7XHJcblxyXG4vKlxyXG5BbGxlZW4gaW4gZWlnZW4gaW5zdGVsbGluZ1xyXG5odHRwOi8vbG9jYWxob3N0OjgwMDMvZGlzY292ZXJ5L2Z1bGxkaXNwbGF5P2RvY2lkPWFsbWE5OTI1NjQxMTkwMTAxNDg4JmNvbnRleHQ9TCZ2aWQ9MzJLVUxfS1VMOkxJQklTTkVUMl9VTklPTiZsYW5nPWVuJnNlYXJjaF9zY29wZT1ETl9hbmRfQ0lfVUNWJmFkYXB0b3I9TG9jYWwlMjBTZWFyY2glMjBFbmdpbmUmaXNGcmJyPXRydWUmdGFiPURpc2NvdmVyeU5ldHdvcmtfVUNWJnF1ZXJ5PWFueSxjb250YWlucyx3b29kJnNvcnRieT1kYXRlX2QmZmFjZXQ9ZnJicmdyb3VwaWQsaW5jbHVkZSw5MDA5MDc1NzUyMjgyMDUyNTQ3Jm9mZnNldD0wXHJcbmh0dHA6Ly9sb2NhbGhvc3Q6ODAwMy9kaXNjb3ZlcnkvZnVsbGRpc3BsYXk/ZG9jaWQ9YWxtYTk5OTI0MjkyODk3MDE0ODgmY29udGV4dD1MJnZpZD0zMktVTF9LVUw6TElCSVNORVQyX1VOSU9OJmxhbmc9ZW4mc2VhcmNoX3Njb3BlPUROX2FuZF9DSV9VQ1YmYWRhcHRvcj1Mb2NhbCUyMFNlYXJjaCUyMEVuZ2luZSZ0YWI9RGlzY292ZXJ5TmV0d29ya19VQ1YmcXVlcnk9YW55LGNvbnRhaW5zLHdvb2Qmb2Zmc2V0PTBcclxuPT09PT4gRGFuIGlzIGVyIG9vayBnZWVuIHBybS1hbG1hLW90aGVyLW1lbWJlcnMtYWZ0ZXIgZWxlbWVudCAhISFcclxuPT09PT4gRGV6ZSBjb250cm9sZXIgemFsIGRhbiBuaWV0IHdvcmRlbiB1aXRnZXZvZXJkLlxyXG5cclxuPT4gRlJCUiBcclxuaHR0cHM6Ly9saWJpcy1uZXR3b3JrLnByaW1vLmV4bGlicmlzZ3JvdXAuY29tL3ByaW1hd3MvcmVzdC9wcml2L256L3BueC9QLzk5MzAwNzAwMDAxMDE0NzE/cmVjb3JkLWluc3RpdHV0aW9uPTMyS1VMX0tVTCZsYW5nPWVuXHJcbmh0dHA6Ly9sb2NhbGhvc3Q6ODAwMy9wcmltYXdzL3Jlc3QvcHJpdi9uei9wbngvUC85OTMwMDcwMDAwMTAxNDg4P3JlY29yZC1pbnN0aXR1dGlvbj0zMktVTF9LVUwmbGFuZz1lblxyXG5cclxuXHJcblxyXG5cclxuTmlldCBpbiBlaWdlbiBpbnN0ZWxsaW5nXHJcbmh0dHA6Ly9sb2NhbGhvc3Q6ODAwMy9kaXNjb3Zlcnkvc2VhcmNoP3F1ZXJ5PWFueSxjb250YWlucyw5OTkyMTcwNzk0NTAxNTAyJnRhYj1EaXNjb3ZlcnlOZXR3b3JrX1VDViZzZWFyY2hfc2NvcGU9RE5fYW5kX0NJX1VDViZ2aWQ9MzJLVUxfS1VMOkxJQklTTkVUMl9VTklPTlxyXG5cclxuKi9cclxuXHJcbiAgICBpZiAoIGl0ZW1EZWxpdmVyeS5zZXJ2aWNlTW9kZS5pbmNsdWRlcyhcIm92cFwiKSApe1xyXG4gICAgICBzZWxmLnJlbW92ZVBybU9wYWMoKTtcclxuICAgICAgc2VsZi5hZGRJbnN0VG9BbG1hSW5zdGl0dXRpb25zTGlzdCgpO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2cgKCBzZWxmLnBhcmVudEN0cmwucGFyZW50Q3RybC5hbG1hSW5zdGl0dXRpb25zTGlzdCApXHJcbiAgICBzZWxmLnBhcmVudEN0cmwucGFyZW50Q3RybC5hbG1hSW5zdGl0dXRpb25zTGlzdC5zb3J0KChhLCBiKSA9PiAoYS5pbnN0TmFtZSA+IGIuaW5zdE5hbWUpID8gMSA6IC0xKTtcclxuICB9XHJcblxyXG4gIGFkZEluc3RUb0FsbWFJbnN0aXR1dGlvbnNMaXN0KCkge1xyXG4gICAgdGhpcy5wYXJlbnRDdHJsLnBhcmVudEN0cmwuYWxtYUluc3RpdHV0aW9uc0xpc3QucHVzaChcclxuICAgICAge1xyXG4gICAgICAgIFwiZ2V0aXRMaW5rXCI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5VGV4dFwiOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgXCJsaW5rUmVjb3JkSWRcIjogdGhpcy5wYXJlbnRDdHJsLnBhcmVudEN0cmwuYWxtYUluc3RpdHV0aW9uc0xpc3RbMF0uZ2V0aXRMaW5rWzBdLmxpbmtSZWNvcmRJZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBcclxuICAgICAgICBcImluc3RDb2RlXCI6IHdpbmRvdy5hcHBDb25maWdbXCJwcmltby12aWV3XCJdLmluc3RpdHV0aW9uW1wiaW5zdGl0dXRpb24tY29kZVwiXSxcclxuICAgICAgICBcImluc3ROYW1lXCI6ICB3aW5kb3cuYXBwQ29uZmlnW1wicHJpbW8tdmlld1wiXS5pbnN0aXR1dGlvbltcImluc3RpdHV0aW9uLW5hbWVcIl0sXHJcbiAgICAgICAgXCJpbnN0SWRcIjogd2luZG93LmFwcENvbmZpZ1tcInByaW1vLXZpZXdcIl0uaW5zdGl0dXRpb24uaWQsXHJcbiAgICAgICAgXCJhdmFpbGFiaWxpdHlTdGF0dXNcIjogXCJhdmFpbGFibGVfaW5faW5zdGl0dXRpb25cIixcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVBybU9wYWMoKXtcclxuICAgIGxldCB1bmJpbmRXYXRjaGVyID0gdGhpcy4kc2NvcGUuJHdhdGNoKCgpID0+XHJcbiAgICAgIHRoaXMuJGVsZW1lbnQucGFyZW50KCkucGFyZW50KCkucGFyZW50KCkuZmluZCgncHJtLW9wYWMnKSxcclxuICAgICAgKG5ld1ZhbCwgb2xkVmFsKSA9PiB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyAodGhpcyk7XHJcbiAgICAgICAgaWYgKG5ld1ZhbCkge1xyXG4gICAgICAgICAgbmV3VmFsLmZpbmQoJ21kLXRhYnMnKS5yZW1vdmUoKTtcclxuICAgICAgICAgIHVuYmluZFdhdGNoZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgIFxyXG4vKlxyXG4gICAgUHJvbWlzZS5yZXNvbHZlKCB0aGlzLiRzY29wZS4kcGFyZW50LiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LiRwYXJlbnQuJGN0cmwuZnVsbFZpZXdTZXJ2aWNlLmdldFNlcnZpY2VzKCB0aGlzLnBhcmVudEN0cmwuaXRlbSwgdGhpcy5wYXJlbnRDdHJsLm9yaWdpbmF0b3IpICkudGhlbihcclxuICAgICAgZnVuY3Rpb24oc2VydmljZXMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyAoc2VydmljZXMpXHJcbiAgICAgICAgLy8gQWRkIHRvIHNlcnZpY2VzIGlmIG5vdCBhbHJlYWQgaW4gdGhlIGxpc3RcclxuICAgICAgICAvL2lmICggc2VydmljZXMuZmluZEluZGV4KHNlcnZpY2UgPT4gc2VydmljZS5zY3JvbGxJZCA9PT0gXCJhbHRtZXRyaWNzXCIpIDwgMCApe1xyXG4gICAgICAgICAgc2VydmljZXMuc3BsaWNlKHNlcnZpY2VzLmxlbmd0aCAtMiwgMCwgc2VjdGlvbkRhdGEpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgfSlcclxuKi9cclxuLypcclxuXHJcbiAgICB2YXIgcHJtT3BhY0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZ2V0aXRfbGluazFfMCA+IGRpdiA+IHBybS1mdWxsLXZpZXctc2VydmljZS1jb250YWluZXIgPiBkaXYuc2VjdGlvbi1ib2R5ID4gZGl2ID4gcHJtLW9wYWMnKVxyXG4gICAgdmFyIHBybU9wYWNNZFRhYnNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2dldGl0X2xpbmsxXzAgPiBkaXYgPiBwcm0tZnVsbC12aWV3LXNlcnZpY2UtY29udGFpbmVyID4gZGl2LnNlY3Rpb24tYm9keSA+IGRpdiA+IHBybS1vcGFjID4gbWQtdGFicycpXHJcbiAgICBjb25zb2xlLmxvZyAocHJtT3BhY0VsZW1lbnQpXHJcbiAgICBjb25zb2xlLmxvZyAocHJtT3BhY01kVGFic0VsZW1lbnQpXHJcbiAgICBpZiAoIHBybU9wYWNFbGVtZW50ICkge1xyXG4gICAgICBjb25zb2xlLmxvZyAoXCJyZW1vdmVyIHBybU9wYWNFbGVtZW50XCIpXHJcbiAgICAgIHBybU9wYWNFbGVtZW50WzBdLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XHJcbiAgICB9XHJcbiovXHJcblxyXG4gIH1cclxufVxyXG5cclxucmVnVmlld090aGVyTWVtYmVyc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRjb21waWxlJywgJyRodHRwJywgJyRyb290U2NvcGUnXTtcclxuXHJcbmV4cG9ydCBsZXQgcmVnVmlld090aGVyTWVtYmVyc0NvbmZpZyA9IHtcclxuICBiaW5kaW5nczoge3BhcmVudEN0cmw6ICc8J30sXHJcbiAgY29udHJvbGxlcjogcmVnVmlld090aGVyTWVtYmVyc0NvbnRyb2xsZXIsXHJcbiAgdGVtcGxhdGU6ICcnXHJcbn1cclxuIiwiICBcclxuXHJcblxyXG4gIGNsYXNzIHJlZ1ZpZXdBdmFpbGFiaWxpdHlMaW5lQ29udHJvbGxlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGUsJGVsZW1lbnQsJHRyYW5zbGF0ZSkge1xyXG4gICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICBzZWxmLmFsbWFJbnN0aXR1dGlvbnNGaWx0ZXJJbnN0Q29kZUxpc3QgPSBbXCIzMktVTF9IVUJcIixcIjMyS1VMX0tITVwiLFwiMzJLVUxfS0hLXCIsXCIzMktVTF9LSExcIixcIjMyS1VMX0tBVEhPXCIsXCIzMktVTF9MVUNBV0VOS1wiXVxyXG4gICAgICBcclxuICAgICAgc2VsZi4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgIHNlbGYuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgc2VsZi4kdHJhbnNsYXRlID0gJHRyYW5zbGF0ZTtcclxuICAgICAgc2VsZi4kY3RybCA9c2VsZi5wYXJlbnRDdHJsLnBhcmVudEN0cmwgO1xyXG4gICAgICBzZWxmLnZpZXdJbnN0ID0gd2luZG93LmFwcENvbmZpZ1tcInByaW1vLXZpZXdcIl0uaW5zdGl0dXRpb24uZGVzY3JpcHRpb247XHJcblxyXG4gICAgICAvKlxyXG4gICAgICBjb25zb2xlLmxvZyggc2VsZiApXHJcbiAgICAgIGNvbnNvbGUubG9nICggc2VsZi4kY3RybC5yZXN1bHQuZGVsaXZlcnkuYWxtYUluc3RpdHV0aW9uc0xpc3QgKVxyXG4gICAgICBjb25zb2xlLmxvZyAoIHNlbGYuJGN0cmwpXHJcbiAgICAgIGNvbnNvbGUubG9nICggXCJkaXNwbGF5ZWRBdmFpbGFiaWxpdHk6XCIrIHNlbGYuJGN0cmwuZGlzcGxheWVkQXZhaWxhYmlsaXR5ICk7XHJcbiAgICAgICovXHJcbiAgICAgIHNlbGYuJGN0cmwuZGlzcGxheWVkQXZhaWxhYmlsaXR5LmZvckVhY2goYXZhaWxhYmlsaXR5ID0+IHtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGNvbnNvbGUubG9nICggXCJpZlNob3dBdmFpbGFiaWxpdHkoYXZhaWxhYmlsaXR5KTpcIisgc2VsZi4kY3RybC5pZlNob3dBdmFpbGFiaWxpdHkoYXZhaWxhYmlsaXR5KSApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nICggXCIhJGN0cmwuaXNDb2xsZWN0aW9uRGlzY292ZXJ5Q29sbGVjdGlvbjpcIisgc2VsZi4kY3RybC5pc0NvbGxlY3Rpb25EaXNjb3ZlcnlDb2xsZWN0aW9uICk7XHJcbiAgICAgICAgY29uc29sZS5sb2cgKCBcIiRjdHJsLnNob3dUaW1lcjpcIisgc2VsZi4kY3RybC5zaG93VGltZXIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nICggXCIkY3RybC5oYW5kbGVEdWVEYXRlKGF2YWlsYWJpbGl0eSk6XCIrIHNlbGYuJGN0cmwuaGFuZGxlRHVlRGF0ZShhdmFpbGFiaWxpdHkpICk7XHJcbiAgICAgICAgY29uc29sZS5sb2cgKCBcIiRjdHJsLmlzUGh5c2ljYWwoKTpcIisgc2VsZi4kY3RybC5pc1BoeXNpY2FsKCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nICggXCIkdHJhbnNsYXRlLmluc3RhbnQoJ2RlbGl2ZXJ5LmNvZGUuYXZhaWxhYmxlX2luX2xpYnJhcnknKSA6XCIrICR0cmFuc2xhdGUuaW5zdGFudCgnZGVsaXZlcnkuY29kZS4nKyBzZWxmLiRjdHJsLmhhbmRsZUR1ZURhdGUoYXZhaWxhYmlsaXR5KSApICApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nICggICR0cmFuc2xhdGUuaW5zdGFudCgnZGVsaXZlcnkuY29kZS4nKyBzZWxmLiRjdHJsLmhhbmRsZUR1ZURhdGUoYXZhaWxhYmlsaXR5KSApICApO1xyXG4gICAgICAgICovXHJcbiAgICAgICAgLy8gbmctaWY9XCI6OigkY3RybC5zaG93RGlzcGxheU90aGVyTG9jYXRpb25zKCkgfHwgJGN0cmwuc2hvd0Rpc3BsYXlMb2NhdGlvbigpICB8fCAkY3RybC5zaG93T3RoZXJMaWJyYXJpZXMoYXZhaWxhYmlsaXR5KSkgJiYgJGN0cmwuaXNQaHlzaWNhbCgkaW5kZXgpXCJcclxuXHJcbiAgICAgICAgdmFyIGF2YWlsYWJpbGl0eUluc3RpdHV0aW9ucyA9IHNlbGYuJGN0cmwucmVzdWx0LmRlbGl2ZXJ5LmFsbWFJbnN0aXR1dGlvbnNMaXN0LmZpbHRlcihpbnN0ID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChpbnN0LmF2YWlsYWJpbGl0eVN0YXR1cyA9PT0gXCJhdmFpbGFibGVfaW5faW5zdGl0dXRpb25cIiAmJiAgc2VsZi5hbG1hSW5zdGl0dXRpb25zRmlsdGVySW5zdENvZGVMaXN0LmluY2x1ZGVzKGluc3QuaW5zdENvZGUpKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyAoIGF2YWlsYWJpbGl0eUluc3RpdHV0aW9ucy5tYXAoIGluc3QgPT4gaW5zdC5pbnN0TmFtZSApLmpvaW4oKSApO1xyXG5cclxuICAgICAgICB2YXIgYXZhaWxhYmlsaXR5SW5zdGl0dXRpb25zTmFtZXMgPSBhdmFpbGFiaWxpdHlJbnN0aXR1dGlvbnMubWFwKCBpbnN0ID0+IGluc3QuaW5zdE5hbWUgKVxyXG5cclxuICAgICAgICBpZiAoIGF2YWlsYWJpbGl0eUluc3RpdHV0aW9uc05hbWVzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBpZiAoc2VsZi4kY3RybC5yZXN1bHQuZGVsaXZlcnkuYXZhaWxhYmlsaXR5WzBdICA9PT0gXCJhdmFpbGFibGVfaW5fbGlicmFyeVwiKXtcclxuICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgaW5zdG5hbWUgZnJvbSBhdmFpbGFiaWxpdHlUZXh0IHdpdGggbGlzdCBvZiBpbnN0bmFtZXNcclxuICAgICAgICAgICAgICAgIGF2YWlsYWJpbGl0eUluc3RpdHV0aW9uc05hbWVzLnVuc2hpZnQoIHdpbmRvdy5hcHBDb25maWdbXCJwcmltby12aWV3XCJdLmluc3RpdHV0aW9uLmRlc2NyaXB0aW9uICk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLiRjdHJsLmF2YWlsYWJpbGl0eVJlZ1ZpZXcgPSBcclxuICAgICAgICAgICAgICAgICAgICAkdHJhbnNsYXRlLmluc3RhbnQoJ2RlbGl2ZXJ5LmNvZGUuJysgc2VsZi4kY3RybC5oYW5kbGVEdWVEYXRlKGF2YWlsYWJpbGl0eSkgKS5yZXBsYWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYXBwQ29uZmlnW1wicHJpbW8tdmlld1wiXS5pbnN0aXR1dGlvbi5kZXNjcmlwdGlvbiAsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFiaWxpdHlJbnN0aXR1dGlvbnNOYW1lcy5zbGljZSgwLCAtMSkuam9pbignLCAnKSArJyBhbmQgJysgYXZhaWxhYmlsaXR5SW5zdGl0dXRpb25zTmFtZXMuc2xpY2UoLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiAoc2VsZi4kY3RybC5yZXN1bHQuZGVsaXZlcnkuYmVzdGxvY2F0aW9uID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLiRjdHJsLnJlc3VsdC5kZWxpdmVyeS5hdmFpbGFiaWxpdHlbMF0gPT09IFwibm9faW52ZW50b3J5XCIpe1xyXG4gICAgICAgICAgICAgICAgLy9zZWxmLiRjdHJsLmRpc3BsYXllZEF2YWlsYWJpbGl0eSA9IFtcImF2YWlsYWJsZV9pbl9saWJyYXJ5XCJdO1xyXG4gICAgICAgICAgICAgICAgc2VsZi4kY3RybC5yZXN1bHQuZGVsaXZlcnkuYXZhaWxhYmlsaXR5ID0gW1wiYXZhaWxhYmxlX2luX2xpYnJhcnlcIl07XHJcbiAgICAgICAgICAgICAgICBpZiAgKGF2YWlsYWJpbGl0eUluc3RpdHV0aW9uc05hbWVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGN0cmwuYXZhaWxhYmlsaXR5UmVnVmlldyA9IFxyXG4gICAgICAgICAgICAgICAgICAgICR0cmFuc2xhdGUuaW5zdGFudCgnZGVsaXZlcnkuY29kZS5hdmFpbGFibGVfaW5fbGlicmFyeScpLnJlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hcHBDb25maWdbXCJwcmltby12aWV3XCJdLmluc3RpdHV0aW9uLmRlc2NyaXB0aW9uICwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJpbGl0eUluc3RpdHV0aW9uc05hbWVzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGN0cmwuYXZhaWxhYmlsaXR5UmVnVmlldyA9IFxyXG4gICAgICAgICAgICAgICAgICAgICR0cmFuc2xhdGUuaW5zdGFudCgnZGVsaXZlcnkuY29kZS5hdmFpbGFibGVfaW5fbGlicmFyeScpLnJlcGxhY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hcHBDb25maWdbXCJwcmltby12aWV3XCJdLmluc3RpdHV0aW9uLmRlc2NyaXB0aW9uICwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2YWlsYWJpbGl0eUluc3RpdHV0aW9uc05hbWVzLnNsaWNlKDAsIC0xKS5qb2luKCcsICcpICsnIGFuZCAnKyBhdmFpbGFiaWxpdHlJbnN0aXR1dGlvbnNOYW1lcy5zbGljZSgtMSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmVnVmlld0F2YWlsYWJpbGl0eUxpbmVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRlbGVtZW50JywnJHRyYW5zbGF0ZSddO1xyXG4gIFxyXG4gIGV4cG9ydCBsZXQgcmVnVmlld0F2YWlsYWJpbGl0eUxpbmVDb25maWcgPSB7XHJcbiAgICBiaW5kaW5nczoge3BhcmVudEN0cmw6ICc8J30sXHJcbiAgICBjb250cm9sbGVyOiByZWdWaWV3QXZhaWxhYmlsaXR5TGluZUNvbnRyb2xsZXIsXHJcbiAgICB0ZW1wbGF0ZTogJydcclxuICB9XHJcbiAgIiwiLypcclxuICBDZW50cmFsIFBhY2thZ2UgTG9hZGVyXHJcblxyXG4gIERvIE5PVCBlZGl0IHRoaXMgZmlsZS5cclxuICBBbGwgY29tcG9uZW50cyBhcmUgZGVjbGFyZWQgaW4gXCJjb21wb25lbnRzLmpzXCJcclxuXHJcbiAgS1VMZXV2ZW4vTElCSVMgKGMpIDIwMTdcclxuICBNZWhtZXQgQ2VsaWtcclxuKi9cclxuaW1wb3J0IFByaW1vIGZyb20gJy4vcHJpbW8tZXhwbG9yZS1kb20vanMvcHJpbW8nXHJcbmltcG9ydCBIZWxwZXIgZnJvbSAnLi9wcmltby1leHBsb3JlLWRvbS9qcy9wcmltby9leHBsb3JlL2hlbHBlcidcclxuaW1wb3J0IENvbXBvbmVudHMgZnJvbSAnLi9jb21wb25lbnRzJ1xyXG5pbXBvcnQgVGVtcGxhdGVzIGZyb20gJy4vdGVtcGxhdGVzJ1xyXG5cclxuLy9tYWtlIFByaW1vIHB1YmxpY1xyXG53aW5kb3cuUHJpbW8gPSBQcmltbztcclxuLy9sb2FkIFByaW1vRXhwbG9yZXIgVUkgaWYgYW5ndWxhci5yZWxvYWRXaXRoRGVidWdJbmZvKCkgaXMgcmFuXHJcbndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICBpZiAoUHJpbW8uaXNEZWJ1Z0VuYWJsZWQoKSkge1xyXG4gICAgbGV0IHVpVVJMID0gJ2h0dHBzOi8vY2RuLnJhd2dpdC5jb20vbWVobWV0Yy9wcmltby1leHBsb3JlLWRvbS11aS9mYzA4NjhkZi9qcy9jdXN0b20uanMnO1xyXG4gICAgLy9sZXQgdWlVUkwgPSAnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2pzL2N1c3RvbS5qcyc7XHJcblxyXG4gICAgSGVscGVyLmxvYWRTY3JpcHQodWlVUkwpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW5qZWN0aW5nIFVJJyk7XHJcbiAgICAgIFByaW1vLmV4cGxvcmUudWkudG9nZ2xlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0sIDIwMDApO1xyXG5cclxubGV0IHNlcnZpY2VzSG9zdCA9ICdodHRwczovL3NlcnZpY2VzLmxpYmlzLmJlLyc7XHJcblxyXG4vLyBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3ZpZXdDdXN0b20nLCBbJ25nTWF0ZXJpYWwnLCAndmNSZWNhcHRjaGEnLCdnb29nbGVBbmFseXRpY3MnXSlcclxubGV0IGFwcCA9IGFuZ3VsYXIubW9kdWxlKCd2aWV3Q3VzdG9tJywgWyduZ01hdGVyaWFsJywgJ3ZjUmVjYXB0Y2hhJ10pXHJcbi8qXHJcbiAgLmNvbnN0YW50KCdmZWVkYmFja1NlcnZpY2VVUkwnLCBzZXJ2aWNlc0hvc3QgKyAnZmVlZGJhY2snKVxyXG4gIC5jb25zdGFudCgncmVwb3J0QVByb2JsZW1VUkwnLCBzZXJ2aWNlc0hvc3QgKyAncmVwb3J0X2FfcHJvYmxlbScpXHJcbiAgLmNvbnN0YW50KCdyZXF1ZXN0QUNvcHlVUkwnLCBzZXJ2aWNlc0hvc3QgKyAncmVxdWVzdF9hX2NvcHknKVxyXG4gIC5jb25zdGFudCgncmVxdWVzdEFDb3B5T2ZFc0RvY1VSTCcsIHNlcnZpY2VzSG9zdCArICdpbGxqd3Rmb3JtJylcclxuICAuY29uZmlnKCgkc2NlRGVsZWdhdGVQcm92aWRlcikgPT4ge1xyXG4gICAgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxXaGl0ZWxpc3QoW1xyXG4gICAgICAnKionXHJcbiAgICBdKTtcclxuICB9KVxyXG4qL1xyXG4vKlxyXG5hcHAuZmFjdG9yeSgncmVnVmlld1NlYXJjaEh0dHBDYWxsSW50ZXJjZXB0b3InLCByZWdWaWV3U2VhcmNoSHR0cENhbGxJbnRlcmNlcHRvcikgIFxyXG4vL2ludGVyY2VwdCBhcGkgY2FsbHMgZm9yIGRhdGFiYXNlIHNlYXJjaCBhbmQgY2hhbmdlIHRvIEtVTCAob25seSByZWdpb25hbCB2aWV3cylcclxudmFyIHJlZ192aWV3cyA9IFtcIjMyS1VMX0hVQjpMSUJJU05FVDJfVU5JT05cIl07XHJcbmlmIChyZWdfdmlld3MuaW5jbHVkZXMod2luZG93LmFwcENvbmZpZy52aWQpKSB7XHJcbiAgYXBwLmNvbmZpZyhbJyRodHRwUHJvdmlkZXInLCAoJGh0dHBQcm92aWRlcikgPT4geyAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdyZWdWaWV3U2VhcmNoSHR0cENhbGxJbnRlcmNlcHRvcicpOyB9XSk7XHJcbn1cclxuKi9cclxuXHJcbi8vQ29udGFpbnMgdGhlIGFmdGVyIGNvbXBvbmVudCBzZWxlY3RvcnMgdGhhdCB3aWxsIGJlIGluamVjdGVkXHJcbmxldCBhZnRlckNvbXBvbmVudHMgPSB7fTtcclxuXHJcbi8vQ3JlYXRlIGFsbCBjb21wb25lbnRzIGFuZCBkZXRlcm1pbmUgaW4gd2hpY2ggYWZ0ZXIgY29tcG9uZW50IHRoZXNlIG5lZWQgdG8gYmVcclxuLy9pbmplY3RlZFxyXG5jb25zb2xlLmxvZygnTG9hZGluZyB2aWV3Q3VzdG9tIGNvbXBvbmVudHMnKTtcclxuQ29tcG9uZW50cy5hbGwuZm9yRWFjaCgoY29tcG9uZW50KSA9PiB7XHJcbiAgY29uc29sZS5sb2coY29tcG9uZW50Lm5hbWUpXHJcbiAgaWYgKGNvbXBvbmVudC5lbmFibGVkKSB7XHJcbiAgICBpZiAoY29tcG9uZW50LmFwcGVuZFRvKSB7XHJcbiAgICAgIGxldCBlbGVtZW50cyA9IGFmdGVyQ29tcG9uZW50c1tjb21wb25lbnQuYXBwZW5kVG9dIHx8IFtdO1xyXG4gICAgICAvL2VsZW1lbnRzLnB1c2goY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICBlbGVtZW50cy5wdXNoKHtcclxuICAgICAgICAnbmFtZSc6IGNvbXBvbmVudC5uYW1lLFxyXG4gICAgICAgICdlbmFibGVJblZpZXcnOiBjb21wb25lbnQuZW5hYmxlSW5WaWV3XHJcbiAgICAgIH0pO1xyXG4gICAgICBhZnRlckNvbXBvbmVudHNbY29tcG9uZW50LmFwcGVuZFRvXSA9IGVsZW1lbnRzO1xyXG5cclxuICAgIH1cclxuICAgIGFwcC5jb25zdGFudCgnYWZ0ZXJDb21wb25lbnRzJywgYWZ0ZXJDb21wb25lbnRzKTtcclxuICAgIGFwcC5jb21wb25lbnQoY29tcG9uZW50Lm5hbWUudG9DYW1lbENhc2UoKSwgY29tcG9uZW50LmNvbmZpZyk7XHJcbiAgfVxyXG59KVxyXG47XHJcblxyXG5jb25zb2xlLmxvZygnUmVwbGFjZSBUZW1wbGF0ZXMnKTtcclxuVGVtcGxhdGVzLmFsbC5mb3JFYWNoKCh0ZW1wbGF0ZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKHRlbXBsYXRlLmlkKVxyXG4gIGFwcC5ydW4oKCR0ZW1wbGF0ZUNhY2hlKSA9PiB7XHJcbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQodGVtcGxhdGUuaWQsIHRlbXBsYXRlLnRlbXBsYXRlKTtcclxuICB9KVxyXG59KVxyXG5cclxuLy9JbmplY3QgcGxhY2UgaG9sZGVycyBpbnRvIHRoZSBhZnRlciBjb21wb25lbnRzXHJcbk9iamVjdC5rZXlzKGFmdGVyQ29tcG9uZW50cykuZm9yRWFjaCgoY29tcG9uZW50LCBpKSA9PiB7XHJcbiAgbGV0IHN1YkNvbXBvbmVudHMgPSBhZnRlckNvbXBvbmVudHNbY29tcG9uZW50XTtcclxuLypcclxuICBjb25zb2xlLmxvZyAoIHN1YkNvbXBvbmVudHMgKVxyXG4gIGNvbnNvbGUubG9nICggc3ViQ29tcG9uZW50cy5tYXAobSA9PiBgPCR7bS5uYW1lfSBwYXJlbnQtY3RybD1cIiRjdHJsXCI+PC8ke20ubmFtZX0+YCkgKVxyXG4qL1xyXG4gIGFwcC5jb21wb25lbnQoY29tcG9uZW50LnRvQ2FtZWxDYXNlKCksIHtcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgIHBhcmVudEN0cmw6ICc8J1xyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlOiBzdWJDb21wb25lbnRzLm1hcChtID0+IGA8JHttLm5hbWV9IHBhcmVudC1jdHJsPVwiJGN0cmxcIj48LyR7bS5uYW1lfT5gKS5qb2luKFwiXCIpXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuIiwiaW1wb3J0IEV4cGxvcmUgZnJvbSAnLi9wcmltby9leHBsb3JlJ1xyXG5pbXBvcnQgUmVjb3JkcyBmcm9tICcuL3ByaW1vL3JlY29yZHMnXHJcbmltcG9ydCBGYWNldHMgZnJvbSAnLi9wcmltby9mYWNldHMnXHJcbmltcG9ydCBWaWV3IGZyb20gJy4vcHJpbW8vdmlldydcclxuaW1wb3J0IFVzZXIgZnJvbSAnLi9wcmltby91c2VyJ1xyXG5pbXBvcnQgSGVscGVyIGZyb20gJy4vcHJpbW8vZXhwbG9yZS9oZWxwZXInXHJcblxyXG4vKipcclxuICogUHJpbW8gbWFpbiBlbnRyeSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpbW8ge1xyXG4gIC8qKlxyXG4gICAqIFJldHVybiB2ZXJzaW9uIGluZm9ybWF0aW9uXHJcbiAgICogQHJldHVybiB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgdmVyc2lvbigpIHtcclxuICAgIGxldCBfdmVyc2lvbiA9IFwiMC4wLjEwXCI7XHJcbiAgICByZXR1cm4gYExpYnJhcnk6JHtfdmVyc2lvbn0gLSBQcmltbzoke3dpbmRvdy5hcHBDb25maWdbJ3N5c3RlbS1jb25maWd1cmF0aW9uJ10uUHJpbW9fVmVyc2lvbl9OdW1iZXJ9OiR7d2luZG93LmFwcENvbmZpZ1snc3lzdGVtLWNvbmZpZ3VyYXRpb24nXS5Qcmltb19Ib3RGaXhfTnVtYmVyfWA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhbmd1bGFyLnJlbG9hZFdpdGhEZWJ1Z0luZm8oKSBoYXMgcmFuXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBzdGF0aWMgaXNEZWJ1Z0VuYWJsZWQoKSB7XHJcbiAgICByZXR1cm4gSGVscGVyLmlzRGVidWdFbmFibGVkKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaWQgdGhlIHNjcmlwdCByYW4gb24gYSBQcmltbyBzaXRlXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBzdGF0aWMgaXNQcmltb0F2YWlsYWJsZSgpIHtcclxuICAgIHJldHVybiBIZWxwZXIuaXNQcmltb0F2YWlsYWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyBhIHByb3h5IGNsYXNzXHJcbiAgICogQHJldHVybiB7RXhwbG9yZX1cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IGV4cGxvcmUoKSB7XHJcbiAgICByZXR1cm4gRXhwbG9yZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIHBvaW50ZXIgdG8gYXZhaWxhYmxlIHJlY29yZHNcclxuICAgKiBAcmV0dXJuIHtSZWNvcmRzfVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgcmVjb3Jkcygpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgcmVzb2x2ZShuZXcgUmVjb3Jkcyh0aGlzLmV4cGxvcmUuY29tcG9uZW50cykpO1xyXG4gICAgfSlcclxuICAgIC8vcmV0dXJuIG5ldyBSZWNvcmRzKHRoaXMuZXhwbG9yZS5jb21wb25lbnRzKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIHBvaW50ZXIgdG8gYXZhaWxhYmxlIGZhY2V0c1xyXG4gICAqIEByZXR1cm4ge0ZhY2V0c31cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0IGZhY2V0cygpe1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgcmVzb2x2ZShuZXcgRmFjZXRzKHRoaXMuZXhwbG9yZS5jb21wb25lbnRzKSk7XHJcbiAgICB9KVxyXG4gICAgLy9yZXR1cm4gbmV3IEZhY2V0cyh0aGlzLmV4cGxvcmUuY29tcG9uZW50cyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYSBwb2ludGVyIHRvIHZpZXcgcmVsYXRlZCBtZXRhZGF0YVxyXG4gICAqIEByZXR1cm4ge1ZpZXd9XHJcbiAgICovXHJcbiAgc3RhdGljIGdldCB2aWV3KCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgcmVzb2x2ZShuZXcgVmlldygpKTtcclxuICAgIH0pXHJcbiAgICAvL3JldHVybiBuZXcgVmlldygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgcG9pbnRlciB0byB1c2VyIHJlbGF0ZWQgbWV0YWRhdGFcclxuICAgKiBAcmV0dXJuIHtVc2VyfVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXQgdXNlcigpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIEhlbHBlci51c2VyRGV0YWlsc0hUVFAoKS50aGVuKCh1c2VyRGV0YWlscyk9PntcclxuICAgICAgICBIZWxwZXIudXNlckZpbmVzSFRUUCgpLnRoZW4oKHVzZXJGaW5lcykgPT4ge1xyXG4gICAgICAgICAgSGVscGVyLnVzZXJMb2Fuc0hUVFAoKS50aGVuKCh1c2VyTG9hbnMpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKG5ldyBVc2VyKHtkZXRhaWxzOiB1c2VyRGV0YWlscywgZmluZXM6IHVzZXJGaW5lcywgbG9hbnM6IHVzZXJMb2Fuc30pKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ29tcG9uZW50cyBmcm9tICcuL2V4cGxvcmUvY29tcG9uZW50cydcclxuaW1wb3J0IEhlbHBlciBmcm9tICcuL2V4cGxvcmUvaGVscGVyJ1xyXG5cclxuLy90aGlzIGlzIHByb3h5IGNsYXNzXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4cGxvcmUge1xyXG4gIHN0YXRpYyBnZXQgY29tcG9uZW50cygpIHtcclxuICAgIGxldCBjID0gbmV3IENvbXBvbmVudHMoKTtcclxuICAgIEhlbHBlci5jb21wb25lbnROYW1lcy5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xyXG4gICAgICBjLmFkZChzZWxlY3Rvcik7XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBjO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCB1aSgpIHtcclxuICAgIGlmICh0aGlzLl91aSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoaXMgaXMgYSBzdHViIGZ1bmN0aW9uIGNhbGwgXCJhbmd1bGFyLnJlbG9hZFdpdGhEZWJ1Z0luZm8oKVwiIHRvIGFjdGl2YXRlIFVJJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fdWk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGhlbHBlcigpIHtcclxuICAgIHJldHVybiBIZWxwZXI7XHJcbiAgfVxyXG59XHJcbiIsInZhciBjc3NTZWxlY3RvckdlbmVyYXRvciA9IG5ldyhyZXF1aXJlKCcuLi8uLi92ZW5kb3IvY3NzLXNlbGVjdG9yLWdlbmVyYXRvci5qcycpKS5Dc3NTZWxlY3RvckdlbmVyYXRvcjtcclxuXHJcbmltcG9ydCBIZWxwZXIgZnJvbSAnLi9oZWxwZXInXHJcblxyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpe1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICB9XHJcblxyXG4gIGJsaW5rKCl7XHJcbiAgICBIZWxwZXIuYmxpbmsodGhpcyk7XHJcbiAgfVxyXG5cclxuICBnZXQgY3NzUGF0aCgpe1xyXG4gICAgcmV0dXJuIGNzc1NlbGVjdG9yR2VuZXJhdG9yLmdldFNlbGVjdG9yKHRoaXMuZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBnZXQgbmFtZSgpe1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5sb2NhbE5hbWU7XHJcbiAgfVxyXG5cclxuICBzY29wZSgpe1xyXG4gICAgaWYgKEhlbHBlci5pc0RlYnVnRW5hYmxlZCgpKXtcclxuICAgICAgcmV0dXJuIGFuZ3VsYXIuZWxlbWVudCh0aGlzLmVsZW1lbnQpLnNjb3BlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdQbGVhc2UgcnVuIFwiYW5ndWxhci5yZWxvYWRXaXRoRGVidWdJbmZvKClcIiBmaXJzdCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3RybCgpe1xyXG4gICAgbGV0IGMgPSBhbmd1bGFyLmVsZW1lbnQodGhpcy5lbGVtZW50KS5jb250cm9sbGVyKHRoaXMubmFtZSk7XHJcbiAgICBpZiAoYykge1xyXG4gICAgICByZXR1cm4gYztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCd1c2luZyBhbHRlcm5hdGl2ZSBtZXRob2QgdG8gZ2V0IGNvbnRyb2xsZXInKTtcclxuICAgICAgbGV0IHNjb3BlID0gdGhpcy5zY29wZSgpO1xyXG4gICAgICBpZiAoc2NvcGUpIHtcclxuICAgICAgICBsZXQgc2NvcGVDaGlsZCA9IHNjb3BlLiQkY2hpbGRUYWlsO1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhzY29wZSkuaW5jbHVkZXMoJyRjdHJsJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRjdHJsXHJcbiAgICAgICAgfSBlbHNlIGlmKE9iamVjdC5rZXlzKHNjb3BlKS5pbmNsdWRlcygnY3RybCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzY29wZS5jdHJsXHJcbiAgICAgICAgfSBlbHNlIGlmIChzY29wZUNoaWxkICYmIE9iamVjdC5rZXlzKHNjb3BlQ2hpbGQpLmluY2x1ZGVzKCckY3RybCcpKXtcclxuICAgICAgICAgICAgcmV0dXJuIHNjb3BlQ2hpbGQuJGN0cmw7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzY29wZUNoaWxkICYmIE9iamVjdC5rZXlzKHNjb3BlQ2hpbGQpLmluY2x1ZGVzKCdjdHJsJykpe1xyXG4gICAgICAgICAgICByZXR1cm4gc2NvcGVDaGlsZC5jdHJsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vICRjdHJsIGRlZmluZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudHMge1xyXG4gIGNvbnN0cnVjdG9yKCl7XHJcblxyXG4gICAgICB0aGlzLl9jb21wb25lbnRzID0ge307XHJcbiAgfVxyXG5cclxuICBhZGQoc2VsZWN0b3IpIHtcclxuICAgIGxldCBlbGVtZW50cyA9IEhlbHBlci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgIGxldCBlbGVtZW50c0FycmF5ID0gdGhpcy5fY29tcG9uZW50c1tzZWxlY3Rvcl0gfHwgW107XHJcblxyXG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCk9PntcclxuICAgICAgZWxlbWVudHNBcnJheS5wdXNoKG5ldyBDb21wb25lbnQoZWxlbWVudCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY29tcG9uZW50c1tzZWxlY3Rvcl0gPSBlbGVtZW50c0FycmF5O1xyXG5cclxuICAgIHJldHVybiBlbGVtZW50c0FycmF5O1xyXG4gIH1cclxuXHJcbiAgZ2V0KHNlbGVjdG9yKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50c1tzZWxlY3Rvcl0gfHwgbnVsbDtcclxuICB9XHJcblxyXG4gIGtleXMoKXtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9jb21wb25lbnRzKTtcclxuICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhlbHBlciB7XHJcbiAgICBzdGF0aWMgaXNEZWJ1Z0VuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5uYW1lID09PSAnTkdfRU5BQkxFX0RFQlVHX0lORk8hJyB8fCB0eXBlb2YoYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3BybS1sb2dvJykpLnNjb3BlKCkpICE9ICd1bmRlZmluZWQnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpc1ByaW1vQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIGlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mKHdpbmRvdy5hbmd1bGFyKSkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigncHJpbW8tZXhwbG9yZScpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldCBjb21wb25lbnROYW1lcygpIHtcclxuICAgICAgICBsZXQgdGFncyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKSk7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudE5hbWVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgdGFnIG9mIHRhZ3MpIHtcclxuICAgICAgICAgICAgbGV0IHRhZ05hbWUgPSB0YWcubG9jYWxOYW1lO1xyXG4gICAgICAgICAgICBpZiAoL15wcm0tLy50ZXN0KHRhZ05hbWUpIHx8IC9ecHJpbW8tLy50ZXN0KHRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudE5hbWVzLmluY2x1ZGVzKHRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50TmFtZXMucHVzaCh0YWdOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29tcG9uZW50TmFtZXMgPSBjb21wb25lbnROYW1lcy5zb3J0KCkuZmlsdGVyKChlLCBpLCBhKSA9PiBpID09PSBhLmZpbmRJbmRleCgoZTIpID0+IGUgPT09IGUyKSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudE5hbWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBxdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpbmplY3RvcigpIHtcclxuICAgICAgbGV0IGMgPSBQcmltby5leHBsb3JlLmNvbXBvbmVudHMuZ2V0KCdwcmltby1leHBsb3JlJyk7XHJcbiAgICAgIGlmIChjICYmIGMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgbGV0IHByaW1vRXhwbG9yZSA9IGFuZ3VsYXIuZWxlbWVudChjWzBdLmVsZW1lbnQpO1xyXG4gICAgICAgICAgbGV0IGluamVjdG9yICAgICA9IHByaW1vRXhwbG9yZS5pbmplY3RvcigpO1xyXG4gICAgICAgICAgaWYgKGluamVjdG9yKXtcclxuICAgICAgICAgICAgcmV0dXJuIGluamVjdG9yO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0IGh0dHAoKSB7XHJcbiAgICAgIGxldCBpbmplY3RvciA9IHRoaXMuaW5qZWN0b3IoKTtcclxuICAgICAgaWYgKGluamVjdG9yKSB7XHJcbiAgICAgICAgbGV0IGggPSBpbmplY3Rvci5nZXQoJyRodHRwJyk7XHJcbiAgICAgICAgaWYgKGgpIHtcclxuICAgICAgICAgIHJldHVybiBoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyBsb2FkU2NyaXB0KHNjcmlwdFVSTCkge1xyXG4gICAgICBpZiAod2luZG93LmFuZ3VsYXIpIHtcclxuICAgICAgICAgIGxldCBhcHBJbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZycsJ2FuZ3VsYXJMb2FkJ10pO1xyXG4gICAgICAgICAgaWYgKGFwcEluamVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgbGV0IGFuZ3VsYXJMb2FkID0gYXBwSW5qZWN0b3IuZ2V0KCdhbmd1bGFyTG9hZCcpO1xyXG4gICAgICAgICAgICAgIGlmIChhbmd1bGFyTG9hZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ3VsYXJMb2FkLmxvYWRTY3JpcHQoc2NyaXB0VVJMKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcm9vdFNjb3BlKCkge1xyXG4gICAgICBsZXQgaW5qZWN0b3IgPSB0aGlzLmluamVjdG9yKCk7XHJcbiAgICAgIGlmIChpbmplY3Rvcikge1xyXG4gICAgICAgICAgbGV0IHJvb3RTY29wZSAgICA9IGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xyXG4gICAgICAgICAgaWYgKHJvb3RTY29wZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcm9vdFNjb3BlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXNlclNlc3Npb25NYW5hZ2VyU2VydmljZSgpIHtcclxuICAgICAgbGV0IHJvb3RTY29wZSA9IHRoaXMucm9vdFNjb3BlKCk7XHJcbiAgICAgIGlmIChyb290U2NvcGUpIHtcclxuICAgICAgICByZXR1cm4gcm9vdFNjb3BlLiQkY2hpbGRIZWFkLiRjdHJsLnVzZXJTZXNzaW9uTWFuYWdlclNlcnZpY2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBqd3REYXRhKCkge1xyXG4gICAgICBsZXQgdVNNUyA9IHRoaXMudXNlclNlc3Npb25NYW5hZ2VyU2VydmljZSgpO1xyXG4gICAgICBpZiAodVNNUykge1xyXG4gICAgICAgIGxldCBqd3REYXRhID0gdVNNUy5qd3RVdGlsU2VydmljZS5nZXREZWNvZGVkVG9rZW4oKSB8fCB7fTtcclxuICAgICAgICByZXR1cm4gand0RGF0YTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1c2VyRGV0YWlscygpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLnVzZXJTZXNzaW9uTWFuYWdlclNlcnZpY2UoKS4kbG9jYWxGb3JhZ2UuZ2V0SXRlbSgndXNlckRldGFpbHMnKS50aGVuKHVzZXJEZXRhaWxzID0+IHJlc29sdmUodXNlckRldGFpbHMpKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVzZXJEZXRhaWxzSFRUUCgpIHtcclxuICAgICAgbGV0IHZpZXdDb2RlID0gdGhpcy5qd3REYXRhKCkudmlld0lkIHx8IHdpbmRvdy5hcHBDb25maWdbJ3ZpZCddO1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoIChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaHR0cC5nZXQoYC9wcmltb19saWJyYXJ5L2xpYndlYi93ZWJzZXJ2aWNlcy9yZXN0L3YxL3VzZXJzZXR0aW5ncz92aWQ9JHt2aWV3Q29kZX1gKS50aGVuKHVzZXJEZXRhaWxzID0+IHJlc29sdmUodXNlckRldGFpbHMuZGF0YSkpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXNlckZpbmVzSFRUUCgpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmh0dHAuZ2V0KCcvcHJpbW9fbGlicmFyeS9saWJ3ZWIvd2Vic2VydmljZXMvcmVzdC92MS9teWFjY291bnQvZmluZXMnKS50aGVuKHVzZXJGaW5lcyA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHVzZXJGaW5lcy5kYXRhO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmVzID0gZGF0YS5kYXRhLmZpbmVzO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmaW5lcy5maW5lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gZmluZXMnKTtcclxuICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2F0Y2goZXJyb3Ipe1xyXG4gICAgICAgICAgICByZXNvbHZlKFtdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVzZXJMb2Fuc0hUVFAoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5odHRwLmdldCgnL3ByaW1vX2xpYnJhcnkvbGlid2ViL3dlYnNlcnZpY2VzL3Jlc3QvdjEvbXlhY2NvdW50L2xvYW5zJykudGhlbih1c2VyTG9hbnMgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSB1c2VyTG9hbnMuZGF0YTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09ICdvaycpIHtcclxuICAgICAgICAgICAgICAgIGxldCBsb2FucyA9IGRhdGEuZGF0YS5sb2FucztcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobG9hbnMubG9hbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGxvYW5zJyk7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNhdGNoKGVycm9yKXtcclxuICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBibGluayhjb21wb25lbnQsIG51bWJlck9mQmxpbmtzID0gNCkge1xyXG4gICAgICAgIGxldCBpbnRlcnZhbElkID0gbnVsbDtcclxuICAgICAgICBsZXQgYm9yZGVyRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEwMDAgLSAxKSkgKyAxO1xyXG4gICAgICAgIGxldCBib3JkZXJTZWxlY3RvciA9IGNvbXBvbmVudC5lbGVtZW50LmNzc1BhdGggKyBpbmRleCArICdSZWN0JztcclxuXHJcbiAgICAgICAgbGV0IGNyZWF0ZUJvcmRlckVsZW1lbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtZW50UmVjdCA9IGNvbXBvbmVudC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJvcmRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxMDAwIC0gMSkpICsgMTtcclxuICAgICAgICAgICAgICAgIGJvcmRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIGJvcmRlclNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIGJvcmRlckVsZW1lbnQuc3R5bGUuYm9yZGVyID0gJzNweCBzb2xpZCByZWQnO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJFbGVtZW50LnN0eWxlLnRvcCA9IGVsZW1lbnRSZWN0LnRvcCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJFbGVtZW50LnN0eWxlLmhlaWdodCA9IGVsZW1lbnRSZWN0LmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJFbGVtZW50LnN0eWxlLndpZHRoID0gZWxlbWVudFJlY3Qud2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyRWxlbWVudC5zdHlsZS5sZWZ0ID0gZWxlbWVudFJlY3QubGVmdCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJvcmRlckVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGJvcmRlclNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVtb3ZlQm9yZGVyRWxlbWVudCA9ICgpID0+IHtcclxuICAgICAgICAgIGlmIChib3JkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGJvcmRlckVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYmxpbmtCb3JkZXJFbGVtZW50ID0gKG51bWJlck9mQmxpbmtzID0gNCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudW1iZXJPZkJsaW5rcyA8IDApIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUJvcmRlckVsZW1lbnQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvcmRlckVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICgobnVtYmVyT2ZCbGlua3MgJSAyKSA9PSAwKSA/ICdub25lJyA6ICdibG9jayc7XHJcbiAgICAgICAgICAgICAgICBudW1iZXJPZkJsaW5rcy0tO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChibGlua0JvcmRlckVsZW1lbnQsIDEwMDAsIG51bWJlck9mQmxpbmtzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9yZGVyRWxlbWVudCA9IGNyZWF0ZUJvcmRlckVsZW1lbnQoKTtcclxuICAgICAgICBibGlua0JvcmRlckVsZW1lbnQobnVtYmVyT2ZCbGlua3MpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBDb21wb25lbnRzIGZyb20gJy4vZXhwbG9yZS9jb21wb25lbnRzJ1xyXG5pbXBvcnQgSGVscGVyIGZyb20gJy4vZXhwbG9yZS9oZWxwZXInXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGYWNldHMge1xyXG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50cykge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZmFjZXRzKGNvbXBvbmVudHMpO1xyXG4gICAgfVxyXG4gICAgX2ZhY2V0cyhjb21wb25lbnRzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjID0gY29tcG9uZW50cy5nZXQoJ3BybS1mYWNldC1hZnRlcicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgJiYgYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN0cmwgPSBjWzBdLmN0cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwuZmFjZXRTZXJ2aWNlLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndHJ5aW5nIHRvIGdldCBmYWNldHMgdGhyb3VnaCB0aGUgcm9vdFNjb3BlJyk7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBIZWxwZXIudXNlclNlc3Npb25NYW5hZ2VyU2VydmljZSgpLnNlYXJjaFN0YXRlU2VydmljZS5yZXN1bHRPYmplY3QuZmFjZXRzO1xyXG4gICAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigndW5hYmxlIHRvIHJldHJpZXZlIGZhY2V0cycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBDb21wb25lbnRzIGZyb20gJy4vZXhwbG9yZS9jb21wb25lbnRzJ1xyXG5pbXBvcnQgSGVscGVyIGZyb20gJy4vZXhwbG9yZS9oZWxwZXInXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNvcmRzIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudHMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zKGNvbXBvbmVudHMpO1xyXG4gICAgfVxyXG4gICAgX2l0ZW1zKGNvbXBvbmVudHMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGMgPSBjb21wb25lbnRzLmdldCgncHJtLXNlYXJjaC1yZXN1bHQtbGlzdC1hZnRlcicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGMgJiYgYy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN0cmwgPSBjWzBdLmN0cmwoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3RybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5pdGVtbGlzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJ0cnkgYWdhaW5cIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCd0cnlpbmcgdG8gZ2V0IHJlY29yZHMgdGhyb3VnaCB0aGUgcm9vdFNjb3BlJyk7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBIZWxwZXIudXNlclNlc3Npb25NYW5hZ2VyU2VydmljZSgpLnNlYXJjaFN0YXRlU2VydmljZS5yZXN1bHRPYmplY3QuZGF0YTtcclxuICAgICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VuYWJsZSB0byByZXRyaWV2ZSBpdGVtcycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBIZWxwZXIgZnJvbSAnLi9leHBsb3JlL2hlbHBlcidcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXIge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXIgPSBfc2tlbFVzZXIpIHtcclxuICAgIGxldCB1U21zID0gSGVscGVyLnVzZXJTZXNzaW9uTWFuYWdlclNlcnZpY2UoKTtcclxuICAgIGxldCBqd3REYXRhID0gSGVscGVyLmp3dERhdGEoKTtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiBqd3REYXRhLnVzZXIgfHwgJycsXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZGV0YWlscy5lbWFpbCB8fCAnJyxcclxuICAgICAgICBuYW1lOiBqd3REYXRhLnVzZXJOYW1lIHx8ICdHdWVzdCcsXHJcbiAgICAgICAgZGlzcGxheV9uYW1lOiB1U21zLmdldFVzZXJOYW1lRm9yRGlzcGxheSgpLFxyXG4gICAgICAgIGlzTG9nZ2VkSW46ICgpID0+IHVTbXMuZ2V0VXNlck5hbWUoKS5sZW5ndGggPiAwLFxyXG4gICAgICAgIGlzT25DYW1wdXM6ICgpID0+IGp3dERhdGEub25DYW1wdXMgPT0gXCJ0cnVlXCIgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgZmluZXM6IHVzZXIuZmluZXMsXHJcbiAgICAgICAgbG9hbnM6IHVzZXIubG9hbnNcclxuICAgICAgfTtcclxuICB9XHJcblxyXG4gIGdldCBfc2tlbFVzZXIoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkZXRhaWxzOiB7fSxcclxuICAgICAgZmluZXM6IHt9LFxyXG4gICAgICBsb2Fuczoge31cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEhlbHBlciBmcm9tICcuL2V4cGxvcmUvaGVscGVyJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgbGV0IHVTbXMgPSBIZWxwZXIudXNlclNlc3Npb25NYW5hZ2VyU2VydmljZSgpO1xyXG4gICAgICBsZXQgand0RGF0YSA9IEhlbHBlci5qd3REYXRhKCk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvZGU6IGp3dERhdGEudmlld0lkIHx8IHdpbmRvdy5hcHBDb25maWdbJ3ZpZCddLFxyXG4gICAgICAgIGluc3RpdHV0aW9uOiB7XHJcbiAgICAgICAgICAgIGNvZGU6IGp3dERhdGEudmlld0luc3RpdHV0aW9uQ29kZSxcclxuICAgICAgICAgICAgbmFtZTogd2luZG93LmFwcENvbmZpZ1sncHJpbW8tdmlldyddWydhdHRyaWJ1dGVzLW1hcCddLmluc3RpdHV0aW9uXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbnRlcmZhY2VMYW5ndWFnZTogdVNtcy5nZXRVc2VyTGFuZ3VhZ2UoKSB8fCB3aW5kb3cuYXBwQ29uZmlnWydwcmltby12aWV3J11bJ2F0dHJpYnV0ZXMtbWFwJ10uaW50ZXJmYWNlTGFuZ3VhZ2UsXHJcbiAgICAgICAgaXA6IHtcclxuICAgICAgICAgIGFkZHJlc3M6IGp3dERhdGEuaXBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIENzc1NlbGVjdG9yR2VuZXJhdG9yLCByb290LFxyXG4gICAgaW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xyXG5cclxuICBDc3NTZWxlY3RvckdlbmVyYXRvciA9IChmdW5jdGlvbigpIHtcclxuICAgIENzc1NlbGVjdG9yR2VuZXJhdG9yLnByb3RvdHlwZS5kZWZhdWx0X29wdGlvbnMgPSB7XHJcbiAgICAgIHNlbGVjdG9yczogWydpZCcsICdjbGFzcycsICd0YWcnLCAnbnRoY2hpbGQnXVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBDc3NTZWxlY3RvckdlbmVyYXRvcihvcHRpb25zKSB7XHJcbiAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcclxuICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5vcHRpb25zID0ge307XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9ucyh0aGlzLmRlZmF1bHRfb3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuc2V0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgdmFyIGtleSwgcmVzdWx0cywgdmFsO1xyXG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICB9XHJcbiAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgZm9yIChrZXkgaW4gb3B0aW9ucykge1xyXG4gICAgICAgIHZhbCA9IG9wdGlvbnNba2V5XTtcclxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0X29wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMub3B0aW9uc1trZXldID0gdmFsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHZvaWQgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuaXNFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gISEoKGVsZW1lbnQgIT0gbnVsbCA/IGVsZW1lbnQubm9kZVR5cGUgOiB2b2lkIDApID09PSAxKTtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLmdldFBhcmVudHMgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIHZhciBjdXJyZW50X2VsZW1lbnQsIHJlc3VsdDtcclxuICAgICAgcmVzdWx0ID0gW107XHJcbiAgICAgIGlmICh0aGlzLmlzRWxlbWVudChlbGVtZW50KSkge1xyXG4gICAgICAgIGN1cnJlbnRfZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuaXNFbGVtZW50KGN1cnJlbnRfZWxlbWVudCkpIHtcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKGN1cnJlbnRfZWxlbWVudCk7XHJcbiAgICAgICAgICBjdXJyZW50X2VsZW1lbnQgPSBjdXJyZW50X2VsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLmdldFRhZ1NlbGVjdG9yID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZUl0ZW0oZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuc2FuaXRpemVJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICB2YXIgY2hhcmFjdGVycztcclxuICAgICAgY2hhcmFjdGVycyA9IChpdGVtLnNwbGl0KCcnKSkubWFwKGZ1bmN0aW9uKGNoYXJhY3Rlcikge1xyXG4gICAgICAgIGlmIChjaGFyYWN0ZXIgPT09ICc6Jykge1xyXG4gICAgICAgICAgcmV0dXJuIFwiXFxcXFwiICsgKCc6Jy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpKSArIFwiIFwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoL1sgIVwiIyQlJicoKSorLC5cXC87PD0+P0BcXFtcXFxcXFxdXmB7fH1+XS8udGVzdChjaGFyYWN0ZXIpKSB7XHJcbiAgICAgICAgICByZXR1cm4gXCJcXFxcXCIgKyBjaGFyYWN0ZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBlc2NhcGUoY2hhcmFjdGVyKS5yZXBsYWNlKC9cXCUvZywgJ1xcXFwnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gY2hhcmFjdGVycy5qb2luKCcnKTtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLmdldElkU2VsZWN0b3IgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIHZhciBpZCwgc2FuaXRpemVkX2lkO1xyXG4gICAgICBpZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICBpZiAoKGlkICE9IG51bGwpICYmIChpZCAhPT0gJycpICYmICEoL1xccy8uZXhlYyhpZCkpICYmICEoL15cXGQvLmV4ZWMoaWQpKSkge1xyXG4gICAgICAgIHNhbml0aXplZF9pZCA9IFwiI1wiICsgKHRoaXMuc2FuaXRpemVJdGVtKGlkKSk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQub3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNhbml0aXplZF9pZCkubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2FuaXRpemVkX2lkO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLmdldENsYXNzU2VsZWN0b3JzID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICB2YXIgY2xhc3Nfc3RyaW5nLCBpdGVtLCByZXN1bHQ7XHJcbiAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICBjbGFzc19zdHJpbmcgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKTtcclxuICAgICAgaWYgKGNsYXNzX3N0cmluZyAhPSBudWxsKSB7XHJcbiAgICAgICAgY2xhc3Nfc3RyaW5nID0gY2xhc3Nfc3RyaW5nLnJlcGxhY2UoL1xccysvZywgJyAnKTtcclxuICAgICAgICBjbGFzc19zdHJpbmcgPSBjbGFzc19zdHJpbmcucmVwbGFjZSgvXlxcc3xcXHMkL2csICcnKTtcclxuICAgICAgICBpZiAoY2xhc3Nfc3RyaW5nICE9PSAnJykge1xyXG4gICAgICAgICAgcmVzdWx0ID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaywgbGVuLCByZWYsIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIHJlZiA9IGNsYXNzX3N0cmluZy5zcGxpdCgvXFxzKy8pO1xyXG4gICAgICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoayA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGsgPCBsZW47IGsrKykge1xyXG4gICAgICAgICAgICAgIGl0ZW0gPSByZWZba107XHJcbiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKFwiLlwiICsgKHRoaXMuc2FuaXRpemVJdGVtKGl0ZW0pKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuZ2V0QXR0cmlidXRlU2VsZWN0b3JzID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICB2YXIgYXR0cmlidXRlLCBibGFja2xpc3QsIGssIGxlbiwgcmVmLCByZWYxLCByZXN1bHQ7XHJcbiAgICAgIHJlc3VsdCA9IFtdO1xyXG4gICAgICBibGFja2xpc3QgPSBbJ2lkJywgJ2NsYXNzJ107XHJcbiAgICAgIHJlZiA9IGVsZW1lbnQuYXR0cmlidXRlcztcclxuICAgICAgZm9yIChrID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgayA8IGxlbjsgaysrKSB7XHJcbiAgICAgICAgYXR0cmlidXRlID0gcmVmW2tdO1xyXG4gICAgICAgIGlmIChyZWYxID0gYXR0cmlidXRlLm5vZGVOYW1lLCBpbmRleE9mLmNhbGwoYmxhY2tsaXN0LCByZWYxKSA8IDApIHtcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKFwiW1wiICsgYXR0cmlidXRlLm5vZGVOYW1lICsgXCI9XCIgKyBhdHRyaWJ1dGUubm9kZVZhbHVlICsgXCJdXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuZ2V0TnRoQ2hpbGRTZWxlY3RvciA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgdmFyIGNvdW50ZXIsIGssIGxlbiwgcGFyZW50X2VsZW1lbnQsIHNpYmxpbmcsIHNpYmxpbmdzO1xyXG4gICAgICBwYXJlbnRfZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgaWYgKHBhcmVudF9lbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgICBjb3VudGVyID0gMDtcclxuICAgICAgICBzaWJsaW5ncyA9IHBhcmVudF9lbGVtZW50LmNoaWxkTm9kZXM7XHJcbiAgICAgICAgZm9yIChrID0gMCwgbGVuID0gc2libGluZ3MubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcclxuICAgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nc1trXTtcclxuICAgICAgICAgIGlmICh0aGlzLmlzRWxlbWVudChzaWJsaW5nKSkge1xyXG4gICAgICAgICAgICBjb3VudGVyKys7XHJcbiAgICAgICAgICAgIGlmIChzaWJsaW5nID09PSBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIFwiOm50aC1jaGlsZChcIiArIGNvdW50ZXIgKyBcIilcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLnRlc3RTZWxlY3RvciA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yKSB7XHJcbiAgICAgIHZhciBpc191bmlxdWUsIHJlc3VsdDtcclxuICAgICAgaXNfdW5pcXVlID0gZmFsc2U7XHJcbiAgICAgIGlmICgoc2VsZWN0b3IgIT0gbnVsbCkgJiYgc2VsZWN0b3IgIT09ICcnKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gZWxlbWVudC5vd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAxICYmIHJlc3VsdFswXSA9PT0gZWxlbWVudCkge1xyXG4gICAgICAgICAgaXNfdW5pcXVlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGlzX3VuaXF1ZTtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLmdldEFsbFNlbGVjdG9ycyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgIHQ6IG51bGwsXHJcbiAgICAgICAgaTogbnVsbCxcclxuICAgICAgICBjOiBudWxsLFxyXG4gICAgICAgIGE6IG51bGwsXHJcbiAgICAgICAgbjogbnVsbFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAoaW5kZXhPZi5jYWxsKHRoaXMub3B0aW9ucy5zZWxlY3RvcnMsICd0YWcnKSA+PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0LnQgPSB0aGlzLmdldFRhZ1NlbGVjdG9yKGVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5vcHRpb25zLnNlbGVjdG9ycywgJ2lkJykgPj0gMCkge1xyXG4gICAgICAgIHJlc3VsdC5pID0gdGhpcy5nZXRJZFNlbGVjdG9yKGVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5vcHRpb25zLnNlbGVjdG9ycywgJ2NsYXNzJykgPj0gMCkge1xyXG4gICAgICAgIHJlc3VsdC5jID0gdGhpcy5nZXRDbGFzc1NlbGVjdG9ycyhlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaW5kZXhPZi5jYWxsKHRoaXMub3B0aW9ucy5zZWxlY3RvcnMsICdhdHRyaWJ1dGUnKSA+PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0LmEgPSB0aGlzLmdldEF0dHJpYnV0ZVNlbGVjdG9ycyhlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaW5kZXhPZi5jYWxsKHRoaXMub3B0aW9ucy5zZWxlY3RvcnMsICdudGhjaGlsZCcpID49IDApIHtcclxuICAgICAgICByZXN1bHQubiA9IHRoaXMuZ2V0TnRoQ2hpbGRTZWxlY3RvcihlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUudGVzdFVuaXF1ZW5lc3MgPSBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3Rvcikge1xyXG4gICAgICB2YXIgZm91bmRfZWxlbWVudHMsIHBhcmVudDtcclxuICAgICAgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICBmb3VuZF9lbGVtZW50cyA9IHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgICAgcmV0dXJuIGZvdW5kX2VsZW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBmb3VuZF9lbGVtZW50c1swXSA9PT0gZWxlbWVudDtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLnRlc3RDb21iaW5hdGlvbnMgPSBmdW5jdGlvbihlbGVtZW50LCBpdGVtcywgdGFnKSB7XHJcbiAgICAgIHZhciBpdGVtLCBrLCBsLCBsZW4sIGxlbjEsIHJlZiwgcmVmMTtcclxuICAgICAgcmVmID0gdGhpcy5nZXRDb21iaW5hdGlvbnMoaXRlbXMpO1xyXG4gICAgICBmb3IgKGsgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcclxuICAgICAgICBpdGVtID0gcmVmW2tdO1xyXG4gICAgICAgIGlmICh0aGlzLnRlc3RVbmlxdWVuZXNzKGVsZW1lbnQsIGl0ZW0pKSB7XHJcbiAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRhZyAhPSBudWxsKSB7XHJcbiAgICAgICAgcmVmMSA9IGl0ZW1zLm1hcChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGFnICsgaXRlbTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBmb3IgKGwgPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGwgPCBsZW4xOyBsKyspIHtcclxuICAgICAgICAgIGl0ZW0gPSByZWYxW2xdO1xyXG4gICAgICAgICAgaWYgKHRoaXMudGVzdFVuaXF1ZW5lc3MoZWxlbWVudCwgaXRlbSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuZ2V0VW5pcXVlU2VsZWN0b3IgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIHZhciBmb3VuZF9zZWxlY3RvciwgaywgbGVuLCByZWYsIHNlbGVjdG9yX3R5cGUsIHNlbGVjdG9ycztcclxuICAgICAgc2VsZWN0b3JzID0gdGhpcy5nZXRBbGxTZWxlY3RvcnMoZWxlbWVudCk7XHJcbiAgICAgIHJlZiA9IHRoaXMub3B0aW9ucy5zZWxlY3RvcnM7XHJcbiAgICAgIGZvciAoayA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGsgPCBsZW47IGsrKykge1xyXG4gICAgICAgIHNlbGVjdG9yX3R5cGUgPSByZWZba107XHJcbiAgICAgICAgc3dpdGNoIChzZWxlY3Rvcl90eXBlKSB7XHJcbiAgICAgICAgICBjYXNlICdpZCc6XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RvcnMuaSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9ycy5pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAndGFnJzpcclxuICAgICAgICAgICAgaWYgKHNlbGVjdG9ycy50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy50ZXN0VW5pcXVlbmVzcyhlbGVtZW50LCBzZWxlY3RvcnMudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcnMudDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdjbGFzcyc6XHJcbiAgICAgICAgICAgIGlmICgoc2VsZWN0b3JzLmMgIT0gbnVsbCkgJiYgc2VsZWN0b3JzLmMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgZm91bmRfc2VsZWN0b3IgPSB0aGlzLnRlc3RDb21iaW5hdGlvbnMoZWxlbWVudCwgc2VsZWN0b3JzLmMsIHNlbGVjdG9ycy50KTtcclxuICAgICAgICAgICAgICBpZiAoZm91bmRfc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZF9zZWxlY3RvcjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlICdhdHRyaWJ1dGUnOlxyXG4gICAgICAgICAgICBpZiAoKHNlbGVjdG9ycy5hICE9IG51bGwpICYmIHNlbGVjdG9ycy5hLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgIGZvdW5kX3NlbGVjdG9yID0gdGhpcy50ZXN0Q29tYmluYXRpb25zKGVsZW1lbnQsIHNlbGVjdG9ycy5hLCBzZWxlY3RvcnMudCk7XHJcbiAgICAgICAgICAgICAgaWYgKGZvdW5kX3NlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmRfc2VsZWN0b3I7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSAnbnRoY2hpbGQnOlxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0b3JzLm4gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcnMubjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gJyonO1xyXG4gICAgfTtcclxuXHJcbiAgICBDc3NTZWxlY3RvckdlbmVyYXRvci5wcm90b3R5cGUuZ2V0U2VsZWN0b3IgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIHZhciBhbGxfc2VsZWN0b3JzLCBpdGVtLCBrLCBsLCBsZW4sIGxlbjEsIHBhcmVudHMsIHJlc3VsdCwgc2VsZWN0b3IsIHNlbGVjdG9ycztcclxuICAgICAgYWxsX3NlbGVjdG9ycyA9IFtdO1xyXG4gICAgICBwYXJlbnRzID0gdGhpcy5nZXRQYXJlbnRzKGVsZW1lbnQpO1xyXG4gICAgICBmb3IgKGsgPSAwLCBsZW4gPSBwYXJlbnRzLmxlbmd0aDsgayA8IGxlbjsgaysrKSB7XHJcbiAgICAgICAgaXRlbSA9IHBhcmVudHNba107XHJcbiAgICAgICAgc2VsZWN0b3IgPSB0aGlzLmdldFVuaXF1ZVNlbGVjdG9yKGl0ZW0pO1xyXG4gICAgICAgIGlmIChzZWxlY3RvciAhPSBudWxsKSB7XHJcbiAgICAgICAgICBhbGxfc2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzZWxlY3RvcnMgPSBbXTtcclxuICAgICAgZm9yIChsID0gMCwgbGVuMSA9IGFsbF9zZWxlY3RvcnMubGVuZ3RoOyBsIDwgbGVuMTsgbCsrKSB7XHJcbiAgICAgICAgaXRlbSA9IGFsbF9zZWxlY3RvcnNbbF07XHJcbiAgICAgICAgc2VsZWN0b3JzLnVuc2hpZnQoaXRlbSk7XHJcbiAgICAgICAgcmVzdWx0ID0gc2VsZWN0b3JzLmpvaW4oJyA+ICcpO1xyXG4gICAgICAgIGlmICh0aGlzLnRlc3RTZWxlY3RvcihlbGVtZW50LCByZXN1bHQpKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgQ3NzU2VsZWN0b3JHZW5lcmF0b3IucHJvdG90eXBlLmdldENvbWJpbmF0aW9ucyA9IGZ1bmN0aW9uKGl0ZW1zKSB7XHJcbiAgICAgIHZhciBpLCBqLCBrLCBsLCByZWYsIHJlZjEsIHJlc3VsdDtcclxuICAgICAgaWYgKGl0ZW1zID09IG51bGwpIHtcclxuICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIHJlc3VsdCA9IFtbXV07XHJcbiAgICAgIGZvciAoaSA9IGsgPSAwLCByZWYgPSBpdGVtcy5sZW5ndGggLSAxOyAwIDw9IHJlZiA/IGsgPD0gcmVmIDogayA+PSByZWY7IGkgPSAwIDw9IHJlZiA/ICsrayA6IC0taykge1xyXG4gICAgICAgIGZvciAoaiA9IGwgPSAwLCByZWYxID0gcmVzdWx0Lmxlbmd0aCAtIDE7IDAgPD0gcmVmMSA/IGwgPD0gcmVmMSA6IGwgPj0gcmVmMTsgaiA9IDAgPD0gcmVmMSA/ICsrbCA6IC0tbCkge1xyXG4gICAgICAgICAgcmVzdWx0LnB1c2gocmVzdWx0W2pdLmNvbmNhdChpdGVtc1tpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXN1bHQuc2hpZnQoKTtcclxuICAgICAgcmVzdWx0ID0gcmVzdWx0LnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhLmxlbmd0aCAtIGIubGVuZ3RoO1xyXG4gICAgICB9KTtcclxuICAgICAgcmVzdWx0ID0gcmVzdWx0Lm1hcChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0uam9pbignJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gQ3NzU2VsZWN0b3JHZW5lcmF0b3I7XHJcblxyXG4gIH0pKCk7XHJcblxyXG4gIGlmICh0eXBlb2YgZGVmaW5lICE9PSBcInVuZGVmaW5lZFwiICYmIGRlZmluZSAhPT0gbnVsbCA/IGRlZmluZS5hbWQgOiB2b2lkIDApIHtcclxuICAgIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBDc3NTZWxlY3RvckdlbmVyYXRvcjtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByb290ID0gdHlwZW9mIGV4cG9ydHMgIT09IFwidW5kZWZpbmVkXCIgJiYgZXhwb3J0cyAhPT0gbnVsbCA/IGV4cG9ydHMgOiB0aGlzO1xyXG4gICAgcm9vdC5Dc3NTZWxlY3RvckdlbmVyYXRvciA9IENzc1NlbGVjdG9yR2VuZXJhdG9yO1xyXG4gIH1cclxuXHJcbn0pLmNhbGwodGhpcyk7XHJcbiIsIi8qXHJcbiAgUmVwbGFjZSB0ZW1wbGF0ZXMuXHJcblxyXG4gIFJlcGxhY2UgdGhlIGRlZmF1bHQgcHJpbW8gdGVtcGxhdGVzIGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMy9wcmltby1leHBsb3JlL2xpYi90ZW1wbGF0ZXMuanNcclxuICB3aXRoIGN1c3RvbSB0ZW1wbGF0ZXNcclxuXHJcbiAgS1VMZXV2ZW4vTElCSVMgKGMpIDIwMThcclxuICBUb20gVmFubWVjaGVsZW5cclxuKi9cclxuaW1wb3J0ICcuL3V0aWxzJ1xyXG5cclxuLyogaW1wb3J0IHlvdXIgdGVtcGxhdGVzICovXHJcbmltcG9ydCBwcm1TZWFyY2hSZXN1bHRBdmFpbGFiaWxpdHlMaW5lSFRNTCBmcm9tICcuLi9odG1sL3RlbXBsYXRlcy9wcm0tc2VhcmNoLXJlc3VsdC1hdmFpbGFiaWxpdHktbGluZS5odG1sJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVtcGxhdGVzIHtcclxuICAgIHN0YXRpYyBnZXQgYWxsKCkge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICBpZCA9IHRlbXBsYXRlSWQgaW4gdGhlIHRlbXBsYXRlQ2FjaGVcclxuICAgICAgICAgIHRlbXBsYXRlID0gdGhlIGltcG9ydGVkIHRlbXBhbHRlXHJcbiAgICAgICAgICBlbmFibGVkID0gdHJ1ZS9mYWxzZSBzaG91bGQgdGhlIGNvbXBvbmVudCBiZSBjcmVhdGVkXHJcbiAgICAgICAgICBlbmFibGVJblZpZXcgPSByZWdleCB0byBkZWZpbmUgaW4gd2hpY2ggdmlld3MgdGhlIHRlbXBsYXRlIGhhcyB0byBiZSByZXBsYWNlZC5cclxuXHJcbiAgICAgICAgICBleC4ge2lkOiAnY29tcG9uZW50cy9zZWFyY2gvdG9wYmFyL3VzZXJBcmVhL3VzZXItYXJlYS5odG1sJywgdGVtcGxhdGU6IHVzZXJBcmVhSFRNTCwgZW5hYmxlZDogdHJ1ZSwgZW5hYmxlSW5WaWV3OiAnLionfVxyXG4gICAgICAgICAgcmVzdWx0cyBpbjpcclxuICAgICAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KCdjb21wb25lbnRzL3NlYXJjaC90b3BiYXIvdXNlckFyZWEvdXNlci1hcmVhLmh0bWwnLHVzZXJBcmVhSFRNTCk7XHJcbiAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4gWyAgICAgIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ2NvbXBvbmVudHMvc2VhcmNoL3NlYXJjaFJlc3VsdC9zZWFyY2hSZXN1bHRBdmFpbGFiaWxpdHkvc2VhcmNoUmVzdWx0QXZhaWxhYmlsaXR5TGluZS5odG1sJyxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBwcm1TZWFyY2hSZXN1bHRBdmFpbGFiaWxpdHlMaW5lSFRNTCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVJblZpZXc6ICdSRUdJT05BTCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF0uZmlsdGVyKCh0ZW1wbGF0ZSkgPT4gKHRlbXBsYXRlLmVuYWJsZWQgJiYgbmV3IFJlZ0V4cCh0ZW1wbGF0ZS5lbmFibGVJblZpZXcpLnRlc3Qod2luZG93LmFwcENvbmZpZy52aWQpKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLypcclxuICBHZW5lcmFsXHJcblxyXG4gIEtVTGV1dmVuL0xJQklTIChjKSAyMDE3XHJcbiAgTWVobWV0IENlbGlrXHJcbiovXHJcblN0cmluZy5wcm90b3R5cGUudG9DYW1lbENhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuc3BsaXQoJy0nKS5tYXAoKGQsIGksIGEpID0+IGkgPiAwID8gZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGQuc2xpY2UoMSkgOiBkKS5qb2luKCcnKTtcclxufVxyXG5cclxuLypcclxuYW5ndWxhci5tb2R1bGUoJ2dvb2dsZUFuYWx5dGljcycsIFtdKTtcclxuYW5ndWxhci5tb2R1bGUoJ2dvb2dsZUFuYWx5dGljcycpLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSwgJGludGVydmFsLCBhbmFseXRpY3NPcHRpb25zKSB7XHJcblx0aWYoYW5hbHl0aWNzT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcImVuYWJsZWRcIikgJiYgYW5hbHl0aWNzT3B0aW9ucy5lbmFibGVkKSB7XHJcblx0XHRpZihhbmFseXRpY3NPcHRpb25zLmhhc093blByb3BlcnR5KFwic2l0ZUlkXCIpICYmIGFuYWx5dGljc09wdGlvbnMuc2l0ZUlkICE9ICcnKSB7XHJcblx0XHRcdFxyXG4gICAgICAgICAgICAoZnVuY3Rpb24odyxkLHMsbCxpKXt3W2xdPXdbbF18fFtdO3dbbF0ucHVzaCh7J2d0bS5zdGFydCc6XHJcbiAgICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpLGV2ZW50OidndG0uanMnfSk7dmFyIGY9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXSxcclxuICAgICAgICAgICAgaj1kLmNyZWF0ZUVsZW1lbnQocyksZGw9bCE9J2RhdGFMYXllcic/JyZsPScrbDonJztqLmFzeW5jPXRydWU7ai5zcmM9XHJcbiAgICAgICAgICAgICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndG0uanM/aWQ9JytpK2RsO2YucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaixmKTtcclxuICAgICAgICAgICAgfSkod2luZG93LGRvY3VtZW50LCdzY3JpcHQnLCdkYXRhTGF5ZXInLGFuYWx5dGljc09wdGlvbnMuc2l0ZUlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlubGluZVNjcmlwdFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ25vc2NyaXB0Jyk7XHJcbiAgICAgICAgaW5saW5lU2NyaXB0VGFnLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuXHJcbiAgICAgICAgY29uc3QgaW5saW5lQ29kZSA9ICc8bm9zY3JpcHQ+PGlmcmFtZSBzcmM9XCJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ucy5odG1sP2lkPUdUTS1XUjI1OU1YXCIgaGVpZ2h0PVwiMFwiIHdpZHRoPVwiMFwiIHN0eWxlPVwiZGlzcGxheTpub25lO3Zpc2liaWxpdHk6aGlkZGVuXCI+PC9pZnJhbWU+PC9ub3NjcmlwdD4nO1xyXG5cclxuICAgICAgICAvLyBNZXRob2RzIG9mIGFkZGluZyBpbm5lciB0ZXh0IHNvbWV0aW1lcyBkb24ndCB3b3JrIGFjcm9zcyBicm93c2Vycy5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaW5saW5lU2NyaXB0VGFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGlubGluZUNvZGUpKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBpbmxpbmVTY3JpcHRUYWcudGV4dCA9IGlubGluZUNvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQoaW5saW5lU2NyaXB0VGFnKTtcdFx0XHJcblx0fVxyXG59KTtcclxuYW5ndWxhci5tb2R1bGUoJ2dvb2dsZUFuYWx5dGljcycpLnZhbHVlKCdhbmFseXRpY3NPcHRpb25zJywge1xyXG5cdGVuYWJsZWQ6IGZhbHNlLFxyXG5cdHNpdGVJZDogJycsXHJcblx0ZGVmYXVsdFRpdGxlOiAnJ1xyXG59KTtcclxuKi9cclxuXHJcbi8vaW50ZXJjZXB0IGFwaSBjYWxscyBmb3IgZGF0YWJhc2Ugc2VhcmNoIGFuZCBjaGFuZ2UgdG8gS1VMIChvbmx5IHJlZ2lvbmFsIHZpZXdzKVxyXG4gIC8qXHJcbnZhciByZWdfdmlld3MgPSBbXCJLVUxldXZlbl9UTU9SRU1cIiwgXCJLVUxldXZlbl9UTU9SRUtcIiwgXCJLVUxldXZlbl9VQ0xMXCIsIFwiS1VMZXV2ZW5fTFVDQVwiLCBcIktVTGV1dmVuX09ESVNFRVwiXTtcclxuaWYgKHJlZ192aWV3cy5pbmNsdWRlcyh3aW5kb3cuYXBwQ29uZmlnLnZpZCkpIHtcclxuICBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3ZpZXdDdXN0b20nLCBbXSlcclxuICAgIC5mYWN0b3J5KCdodHRwQ2FsbEludGVyY2VwdG9yJywgWygpID0+IHtcclxuICAgICAgdmFyIGh0dHBDYWxsSW50ZXJjZXB0b3IgPSB7XHJcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24oY29uZmlnKXtcclxuICAgICAgICAgIGlmIChjb25maWcudXJsLmluY2x1ZGVzKCdwbnhzJykgJiYgIWNvbmZpZy51cmwuaW5jbHVkZXMoJ2RlbGl2ZXJ5JykgJiYgY29uZmlnLnBhcmFtcykge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGNvbmZpZyk7XHJcblxyXG4gICAgICAgICAgICBpZihjb25maWcucGFyYW1zLmRhdGFiYXNlcyl7XHJcbiAgICAgICAgICAgICAgY29uZmlnLnBhcmFtcy5pbnN0ID0gJ0tVTCc7XHJcbiAgICAgICAgICAgICAgY29uZmlnLnBhcmFtcy52aWQgPSAnS1VMZXV2ZW4nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGh0dHBDYWxsSW50ZXJjZXB0b3I7XHJcbiAgICB9XSlcclxuICAgIC5jb25maWcoWyckaHR0cFByb3ZpZGVyJywgKCRodHRwUHJvdmlkZXIpID0+IHtcclxuICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnaHR0cENhbGxJbnRlcmNlcHRvcicpO1xyXG4gICAgfV0pO1xyXG59XHJcbiovXHJcbi8qXHJcbmFuZ3VsYXIuZWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdENsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xyXG4gIHJldHVybiAoZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LCBjbGFzc05hbWUpIHtcclxuICAgIGlmIChlbGVtZW50WzBdLm5vZGVOYW1lID09PSAnSFRNTCcpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoY2xhc3NOYW1lKSkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBjbG9zZXN0KGVsZW1lbnQucGFyZW50KCksIGNsYXNzTmFtZSk7XHJcbiAgICB9XHJcbiAgfSkodGhpcywgY2xhc3NOYW1lKTtcclxufTtcclxuXHJcbmFuZ3VsYXIuZWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdE5vZGUgPSBmdW5jdGlvbiAobm9kZU5hbWUpIHtcclxuICByZXR1cm4gKGZ1bmN0aW9uIGNsb3Nlc3QoZWxlbWVudCwgbm9kZU5hbWUpIHtcclxuICAgIGlmIChlbGVtZW50WzBdLm5vZGVOYW1lID09PSAnSFRNTCcpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnRbMF0ubm9kZU5hbWUgPT0gbm9kZU5hbWUudG9VcHBlckNhc2UoKSkge1xyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBjbG9zZXN0KGVsZW1lbnQucGFyZW50KCksIG5vZGVOYW1lKTtcclxuICAgIH1cclxuICB9KSh0aGlzLCBub2RlTmFtZSk7XHJcbn07XHJcbiovXHJcbiJdfQ=="}